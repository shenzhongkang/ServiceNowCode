/*! RESOURCE: /scripts/reportlibs/fullcalendar.min.js */
/*!
 * FullCalendar v2.2.7
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 * (c) 2015 Tanguy Pruvot
 * The minimized version which we use is based on this customized version - edited by me
 */
!(function (t) {
  'function' == typeof define && define.amd
    ? define(['jquery', 'moment'], t)
    : t(jQuery, moment);
})(function (t, e) {
  var n = {
      titleRangeSeparator: ' â€” ',
      monthYearFormat: 'MMMM YYYY',
      defaultTimedEventDuration: '02:00:00',
      defaultAllDayEventDuration: { days: 1 },
      forceEventDuration: !1,
      nextDayThreshold: '09:00:00',
      defaultView: 'month',
      aspectRatio: 1.35,
      header: { left: 'title', center: '', right: 'today prev,next' },
      weekends: !0,
      weekNumbers: !1,
      weekNumberTitle: 'W',
      weekNumberCalculation: 'local',
      lazyFetching: !0,
      startParam: 'start',
      endParam: 'end',
      timezoneParam: 'timezone',
      timezone: !1,
      minDate: null,
      maxDate: null,
      firstDay: 0,
      yearTitleFormat: 'YYYY',
      yearFormat: 'YYYY',
      isRTL: !1,
      defaultButtonText: {
        prev: 'prev',
        next: 'next',
        prevYear: 'prev year',
        nextYear: 'next year',
        today: 'today',
        year: 'year',
        month: 'month',
        week: 'week',
        day: 'day',
      },
      buttonIcons: {
        prev: 'left-single-arrow',
        next: 'right-single-arrow',
        prevYear: 'left-double-arrow',
        nextYear: 'right-double-arrow',
      },
      theme: !1,
      themeButtonIcons: {
        prev: 'circle-triangle-w',
        next: 'circle-triangle-e',
        prevYear: 'seek-prev',
        nextYear: 'seek-next',
      },
      dragOpacity: 0.75,
      dragRevertDuration: 500,
      dragScroll: !0,
      unselectAuto: !0,
      dropAccept: '*',
      eventLimit: !1,
      eventLimitText: 'more',
      eventLimitClick: 'popover',
      dayPopoverFormat: 'LL',
      handleWindowResize: !0,
      windowResizeDelay: 200,
    },
    i = {
      header: { left: 'next,prev today', center: '', right: 'title' },
      buttonIcons: {
        prev: 'right-single-arrow',
        next: 'left-single-arrow',
        prevYear: 'right-double-arrow',
        nextYear: 'left-double-arrow',
      },
      themeButtonIcons: {
        prev: 'circle-triangle-e',
        next: 'circle-triangle-w',
        nextYear: 'seek-prev',
        prevYear: 'seek-next',
      },
    },
    r = (t.fullCalendar = { version: '2.2.7' }),
    s = (r.views = {});
  function o(t) {
    a(n, t);
  }
  function a(e) {
    function n(n, i) {
      t.isPlainObject(i) && t.isPlainObject(e[n]) && !l(n)
        ? (e[n] = a({}, e[n], i))
        : void 0 !== i && (e[n] = i);
    }
    for (var i = 1; i < arguments.length; i++) t.each(arguments[i], n);
    return e;
  }
  function l(t) {
    return /(Time|Duration)$/.test(t);
  }
  t.fn.fullCalendar = function (e) {
    var n = Array.prototype.slice.call(arguments, 1),
      i = this;
    return (
      this.each(function (r, s) {
        var o,
          a = t(s),
          l = a.data('fullCalendar');
        'string' == typeof e
          ? l &&
            t.isFunction(l[e]) &&
            ((o = l[e].apply(l, n)),
            r || (i = o),
            'destroy' === e && a.removeData('fullCalendar'))
          : l || ((l = new Gt(a, e)), a.data('fullCalendar', l), l.render());
      }),
      i
    );
  };
  var d = (r.langs = {});
  (r.datepickerLang = function (e, n, i) {
    var r = d[e] || (d[e] = {});
    (r.isRTL = i.isRTL),
      (r.weekNumberTitle = i.weekHeader),
      t.each(h, function (t, e) {
        r[t] = e(i);
      }),
      t.datepicker &&
        ((t.datepicker.regional[n] = t.datepicker.regional[e] = i),
        (t.datepicker.regional.en = t.datepicker.regional['']),
        t.datepicker.setDefaults(i));
  }),
    (r.lang = function (e, i) {
      var r, s;
      (r = d[e] || (d[e] = {})),
        i && a(r, i),
        (s = c(e)),
        t.each(u, function (t, e) {
          void 0 === r[t] && (r[t] = e(s, r));
        }),
        (n.lang = e);
    });
  var h = {
      defaultButtonText: function (t) {
        return {
          prev: A(t.prevText),
          next: A(t.nextText),
          today: A(t.currentText),
        };
      },
      monthYearFormat: function (t) {
        return t.showMonthAfterYear
          ? 'YYYY[' + t.yearSuffix + '] MMMM'
          : 'MMMM YYYY[' + t.yearSuffix + ']';
      },
    },
    u = {
      dayOfMonthFormat: function (t, e) {
        var n = t.longDateFormat('l');
        return (
          (n = n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g, '')),
          e.isRTL ? (n += ' ddd') : (n = 'ddd ' + n),
          n
        );
      },
      smallTimeFormat: function (t) {
        return t
          .longDateFormat('LT')
          .replace(':mm', '(:mm)')
          .replace(/(\Wmm)$/, '($1)')
          .replace(/\s*a$/i, 'a');
      },
      extraSmallTimeFormat: function (t) {
        return t
          .longDateFormat('LT')
          .replace(':mm', '(:mm)')
          .replace(/(\Wmm)$/, '($1)')
          .replace(/\s*a$/i, 't');
      },
      noMeridiemTimeFormat: function (t) {
        return t.longDateFormat('LT').replace(/\s*a$/i, '');
      },
    };
  function c(t) {
    var n = e.localeData || e.langData;
    return n.call(e, t) || n.call(e, 'en');
  }
  function f(t, e) {
    e.left && t.css({ 'border-left-width': 1, 'margin-left': e.left - 1 }),
      e.right &&
        t.css({ 'border-right-width': 1, 'margin-right': e.right - 1 });
  }
  function g(t) {
    t.css({
      'margin-left': '',
      'margin-right': '',
      'border-left-width': '',
      'border-right-width': '',
    });
  }
  function p() {
    t('body').addClass('fc-not-allowed');
  }
  function m() {
    t('body').removeClass('fc-not-allowed');
  }
  function v(e, n, i) {
    var r = Math.floor(n / e.length),
      s = Math.floor(n - r * (e.length - 1)),
      o = [],
      a = [],
      l = [],
      d = 0;
    y(e),
      e.each(function (n, i) {
        var h = n === e.length - 1 ? s : r,
          u = t(i).outerHeight(!0);
        u < h ? (o.push(i), a.push(u), l.push(t(i).height())) : (d += u);
      }),
      i &&
        ((n -= d),
        (r = Math.floor(n / o.length)),
        (s = Math.floor(n - r * (o.length - 1)))),
      t(o).each(function (e, n) {
        var i = e === o.length - 1 ? s : r,
          d = a[e],
          h = i - (d - l[e]);
        d < i && t(n).height(h);
      });
  }
  function y(t) {
    t.height('');
  }
  function w(e) {
    var n = 0;
    return (
      e.find('> *').each(function (e, i) {
        var r = t(i).outerWidth();
        r > n && (n = r);
      }),
      n++,
      e.width(n),
      n
    );
  }
  function b(t, e) {
    return (
      t.height(e).addClass('fc-scroller'),
      t[0].scrollHeight - 1 > t[0].clientHeight || (S(t), !1)
    );
  }
  function S(t) {
    t.height('').removeClass('fc-scroller');
  }
  function E(e) {
    var n = e.css('position'),
      i = e
        .parents()
        .filter(function () {
          var e = t(this);
          return /(auto|scroll)/.test(
            e.css('overflow') + e.css('overflow-y') + e.css('overflow-x')
          );
        })
        .eq(0);
    return 'fixed' !== n && i.length ? i : t(e[0].ownerDocument || document);
  }
  function C(t) {
    var e = t.offset().left,
      n = e + t.width(),
      i = t.children(),
      r = i.offset().left;
    return { left: r - e, right: n - (r + i.outerWidth()) };
  }
  function D(t) {
    return 1 == t.which && !t.ctrlKey;
  }
  function T(t, e) {
    var n,
      i,
      r,
      s,
      o = t.start,
      a = t.end,
      l = e.start,
      d = e.end;
    if (a > l && o < d)
      return (
        o >= l ? ((n = o.clone()), (r = !0)) : ((n = l.clone()), (r = !1)),
        a <= d ? ((i = a.clone()), (s = !0)) : ((i = d.clone()), (s = !1)),
        { start: n, end: i, isStart: r, isEnd: s }
      );
  }
  function k(t, e) {
    if (void 0 !== (t = t || {})[e]) return t[e];
    for (var n, i = e.split(/(?=[A-Z])/), r = i.length - 1; r >= 0; r--)
      if (void 0 !== (n = t[i[r].toLowerCase()])) return n;
    return t.default;
  }
  r.lang('en', { dayPopoverFormat: 'dddd, MMMM D' }),
    (r.intersectionToSeg = T),
    (r.applyAll = L),
    (r.debounce = W);
  var H = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'],
    x = [
      'year',
      'month',
      'week',
      'day',
      'hour',
      'minute',
      'second',
      'millisecond',
    ];
  function R(t, n) {
    return e.duration({
      days: t.clone().stripTime().diff(n.clone().stripTime(), 'days'),
      ms: t.time() - n.time(),
    });
  }
  function M(t, e) {
    var n, i, r;
    for (
      n = 0;
      n < x.length && !((r = F((i = x[n]), t, e)) >= 1 && r % 1 == 0);
      n++
    );
    return i;
  }
  function F(t, n, i) {
    return null != i
      ? i.diff(n, t, !0)
      : e.isDuration(n)
      ? n.as(t)
      : n.end.diff(n.start, t, !0);
  }
  function G(t) {
    return /^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t);
  }
  var N = {}.hasOwnProperty;
  function V(t) {
    var e = function () {};
    return (e.prototype = t), new e();
  }
  function Y(t, e) {
    for (var n in t) z(t, n) && (e[n] = t[n]);
  }
  function z(t, e) {
    return N.call(t, e);
  }
  function L(e, n, i) {
    if ((t.isFunction(e) && (e = [e]), e)) {
      var r, s;
      for (r = 0; r < e.length; r++) s = e[r].apply(n, i) || s;
      return s;
    }
  }
  function _() {
    for (var t = 0; t < arguments.length; t++)
      if (void 0 !== arguments[t]) return arguments[t];
  }
  function P(t) {
    return (t + '')
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/'/g, '&#039;')
      .replace(/"/g, '&quot;')
      .replace(/\n/g, '<br />');
  }
  function A(t) {
    return t.replace(/&.*?;/g, '');
  }
  function O(t) {
    return t.charAt(0).toUpperCase() + t.slice(1);
  }
  function B(t, e) {
    return t - e;
  }
  function W(t, e) {
    var n,
      i,
      r,
      s,
      o = function () {
        var a = +new Date() - s;
        a < e && a > 0
          ? (n = setTimeout(o, e - a))
          : ((n = null), t.apply(r, i), n || (r = i = null));
      };
    return function () {
      (r = this),
        (i = arguments),
        (s = +new Date()),
        n || (n = setTimeout(o, e));
    };
  }
  var I,
    Z,
    j,
    X = /^\s*\d{4}-\d\d$/,
    U =
      /^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,
    $ = e.fn,
    q = t.extend({}, $);
  function K(n, i, r) {
    var s,
      o,
      a,
      l,
      d = n[0],
      h = 1 == n.length && 'string' == typeof d;
    return (
      e.isMoment(d)
        ? J(d, (l = e.apply(null, n)))
        : !(function (t) {
            return (
              '[object Date]' === Object.prototype.toString.call(t) ||
              t instanceof Date
            );
          })(d) && void 0 !== d
        ? ((s = !1),
          (o = !1),
          h
            ? X.test(d)
              ? ((n = [(d += '-01')]), (s = !0), (o = !0))
              : (a = U.exec(d)) && ((s = !a[5]), (o = !0))
            : t.isArray(d) && (o = !0),
          (l = i || s ? e.utc.apply(e, n) : e.apply(null, n)),
          s
            ? ((l._ambigTime = !0), (l._ambigZone = !0))
            : r && (o ? (l._ambigZone = !0) : h && l.zone(d)))
        : (l = e.apply(null, n)),
      (l._fullCalendar = !0),
      l
    );
  }
  function Q(t, n) {
    var i,
      s,
      o = !1,
      a = !1,
      l = t.length,
      d = [];
    for (i = 0; i < l; i++)
      (s = t[i]),
        e.isMoment(s) || (s = r.moment.parseZone(s)),
        (o = o || s._ambigTime),
        (a = a || s._ambigZone),
        d.push(s);
    for (i = 0; i < l; i++)
      (s = d[i]),
        n || !o || s._ambigTime
          ? a && !s._ambigZone && (d[i] = s.clone().stripZone())
          : (d[i] = s.clone().stripTime());
    return d;
  }
  function J(t, e) {
    t._ambigTime ? (e._ambigTime = !0) : e._ambigTime && (e._ambigTime = !1),
      t._ambigZone ? (e._ambigZone = !0) : e._ambigZone && (e._ambigZone = !1);
  }
  function tt(t, e) {
    t.year(e[0] || 0)
      .month(e[1] || 0)
      .date(e[2] || 0)
      .hours(e[3] || 0)
      .minutes(e[4] || 0)
      .seconds(e[5] || 0)
      .milliseconds(e[6] || 0);
  }
  function et(t, e) {
    return q.format.call(t, e);
  }
  function nt(t, e) {
    var n,
      i = '';
    for (n = 0; n < e.length; n++) i += rt(t, e[n]);
    return i;
  }
  (r.moment = function () {
    return K(arguments);
  }),
    (r.moment.utc = function () {
      var t = K(arguments, !0);
      return t.hasTime() && t.utc(), t;
    }),
    (r.moment.parseZone = function () {
      return K(arguments, !0, !0);
    }),
    ($.clone = function () {
      var t = q.clone.apply(this, arguments);
      return J(this, t), this._fullCalendar && (t._fullCalendar = !0), t;
    }),
    ($.time = function (t) {
      if (!this._fullCalendar) return q.time.apply(this, arguments);
      if (null == t)
        return e.duration({
          hours: this.hours(),
          minutes: this.minutes(),
          seconds: this.seconds(),
          milliseconds: this.milliseconds(),
        });
      (this._ambigTime = !1),
        e.isDuration(t) || e.isMoment(t) || (t = e.duration(t));
      var n = 0;
      return (
        e.isDuration(t) && (n = 24 * Math.floor(t.asDays())),
        this.hours(n + t.hours())
          .minutes(t.minutes())
          .seconds(t.seconds())
          .milliseconds(t.milliseconds())
      );
    }),
    ($.stripTime = function () {
      var t;
      return (
        this._ambigTime ||
          ((t = this.toArray()),
          this.utc(),
          Z(this, t.slice(0, 3)),
          (this._ambigTime = !0),
          (this._ambigZone = !0)),
        this
      );
    }),
    ($.hasTime = function () {
      return !this._ambigTime;
    }),
    ($.stripZone = function () {
      var t, e;
      return (
        this._ambigZone ||
          ((t = this.toArray()),
          (e = this._ambigTime),
          this.utc(),
          Z(this, t),
          (this._ambigTime = e || !1),
          (this._ambigZone = !0)),
        this
      );
    }),
    ($.hasZone = function () {
      return !this._ambigZone;
    }),
    ($.local = function () {
      var t = this.toArray(),
        e = this._ambigZone;
      return (
        q.local.apply(this, arguments),
        (this._ambigTime = !1),
        (this._ambigZone = !1),
        e && j(this, t),
        this
      );
    }),
    ($.utc = function () {
      return (
        q.utc.apply(this, arguments),
        (this._ambigTime = !1),
        (this._ambigZone = !1),
        this
      );
    }),
    t.each(['zone', 'utcOffset'], function (t, e) {
      q[e] &&
        ($[e] = function (t) {
          return (
            null != t && ((this._ambigTime = !1), (this._ambigZone = !1)),
            q[e].apply(this, arguments)
          );
        });
    }),
    ($.format = function () {
      return this._fullCalendar && arguments[0]
        ? ((t = this), (e = arguments[0]), nt(t, dt(e)))
        : this._ambigTime
        ? et(this, 'YYYY-MM-DD')
        : this._ambigZone
        ? et(this, 'YYYY-MM-DD[T]HH:mm:ss')
        : q.format.apply(this, arguments);
      var t, e;
    }),
    ($.toISOString = function () {
      return this._ambigTime
        ? et(this, 'YYYY-MM-DD')
        : this._ambigZone
        ? et(this, 'YYYY-MM-DD[T]HH:mm:ss')
        : q.toISOString.apply(this, arguments);
    }),
    ($.isWithin = function (t, e) {
      var n = Q([this, t, e]);
      return n[0] >= n[1] && n[0] < n[2];
    }),
    ($.isSame = function (t, e) {
      var n;
      return this._fullCalendar
        ? e
          ? ((n = Q([this, t], !0)), q.isSame.call(n[0], n[1], e))
          : ((t = r.moment.parseZone(t)),
            q.isSame.call(this, t) &&
              Boolean(this._ambigTime) === Boolean(t._ambigTime) &&
              Boolean(this._ambigZone) === Boolean(t._ambigZone))
        : q.isSame.apply(this, arguments);
    }),
    t.each(['isBefore', 'isAfter'], function (t, e) {
      $[e] = function (t, n) {
        var i;
        return this._fullCalendar
          ? ((i = Q([this, t])), q[e].call(i[0], i[1], n))
          : q[e].apply(this, arguments);
      };
    }),
    (I = '_d' in e() && 'updateOffset' in e),
    (Z = I
      ? function (t, n) {
          t._d.setTime(Date.UTC.apply(Date, n)), e.updateOffset(t, !1);
        }
      : tt),
    (j = I
      ? function (t, n) {
          t._d.setTime(
            +new Date(
              n[0] || 0,
              n[1] || 0,
              n[2] || 0,
              n[3] || 0,
              n[4] || 0,
              n[5] || 0,
              n[6] || 0
            )
          ),
            e.updateOffset(t, !1);
        }
      : tt);
  var it = {
    t: function (t) {
      return et(t, 'a').charAt(0);
    },
    T: function (t) {
      return et(t, 'A').charAt(0);
    },
  };
  function rt(t, e) {
    var n, i;
    return 'string' == typeof e
      ? e
      : (n = e.token)
      ? it[n]
        ? it[n](t)
        : et(t, n)
      : e.maybe && (i = nt(t, e.maybe)).match(/[1-9]/)
      ? i
      : '';
  }
  function st(t, e, n, i, s) {
    return (
      (i = i || ' - '),
      (function (t, e, n, i, r) {
        var s,
          o,
          a,
          l,
          d = '',
          h = '',
          u = '',
          c = '',
          f = '';
        for (o = 0; o < n.length && !1 !== (s = at(t, e, n[o])); o++) d += s;
        for (a = n.length - 1; a > o && !1 !== (s = at(t, e, n[a])); a--)
          h = s + h;
        for (l = o; l <= a; l++) (u += rt(t, n[l])), (c += rt(e, n[l]));
        (u || c) && (f = r ? c + i + u : u + i + c);
        return d + f + h;
      })(
        (t = r.moment.parseZone(t)),
        (e = r.moment.parseZone(e)),
        dt((n = (t.localeData || t.lang).call(t).longDateFormat(n) || n)),
        i,
        s
      )
    );
  }
  r.formatRange = st;
  var ot = {
    Y: 'year',
    M: 'month',
    D: 'day',
    d: 'day',
    A: 'second',
    a: 'second',
    T: 'second',
    t: 'second',
    H: 'second',
    h: 'second',
    m: 'second',
    s: 'second',
  };
  function at(t, e, n) {
    var i, r;
    return 'string' == typeof n
      ? n
      : !!((i = n.token) && (r = ot[i.charAt(0)]) && t.isSame(e, r)) &&
          et(t, i);
  }
  var lt = {};
  function dt(t) {
    return t in lt
      ? lt[t]
      : (lt[t] = (function t(e) {
          var n = [];
          var i = /\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;
          var r;
          for (; (r = i.exec(e)); )
            r[1]
              ? n.push(r[1])
              : r[2]
              ? n.push({ maybe: t(r[2]) })
              : r[3]
              ? n.push({ token: r[3] })
              : r[5] && n.push(r[5]);
          return n;
        })(t));
  }
  function ht() {}
  (r.Class = ht),
    (ht.extend = function (t) {
      var e,
        n = this;
      return (
        z((t = t || {}), 'constructor') && (e = t.constructor),
        'function' != typeof e &&
          (e = t.constructor =
            function () {
              n.apply(this, arguments);
            }),
        (e.prototype = V(n.prototype)),
        Y(t, e.prototype),
        (function (t, e) {
          var n,
            i,
            r = ['constructor', 'toString', 'valueOf'];
          for (n = 0; n < r.length; n++)
            t[(i = r[n])] !== Object.prototype[i] && (e[i] = t[i]);
        })(t, e.prototype),
        Y(n, e),
        e
      );
    }),
    (ht.mixin = function (t) {
      Y(t.prototype || t, this.prototype);
    });
  var ut = ht.extend({
      isHidden: !0,
      options: null,
      el: null,
      documentMousedownProxy: null,
      margin: 10,
      constructor: function (t) {
        this.options = t || {};
      },
      show: function () {
        this.isHidden &&
          (this.el || this.render(),
          this.el.show(),
          this.position(),
          (this.isHidden = !1),
          this.trigger('show'));
      },
      hide: function () {
        this.isHidden ||
          (this.el.hide(), (this.isHidden = !0), this.trigger('hide'));
      },
      render: function () {
        var e = this,
          n = this.options;
        (this.el = t('<div class="fc-popover"></div>')
          .addClass(n.className || '')
          .css({ top: 0, left: 0 })
          .append(n.content)
          .appendTo(n.parentEl)),
          this.el.on('click', '.fc-close', function () {
            e.hide();
          }),
          n.autoHide &&
            t(document).on(
              'mousedown',
              (this.documentMousedownProxy = t.proxy(this, 'documentMousedown'))
            );
      },
      documentMousedown: function (e) {
        this.el && !t(e.target).closest(this.el).length && this.hide();
      },
      destroy: function () {
        this.hide(),
          this.el && (this.el.remove(), (this.el = null)),
          t(document).off('mousedown', this.documentMousedownProxy);
      },
      position: function () {
        var e,
          n,
          i,
          r,
          s = this.options,
          o = this.el.offsetParent().offset(),
          a = this.el.outerWidth(),
          l = (this.el.outerHeight(), t(window)),
          d = E(this.el);
        (i = s.top || 0),
          (r =
            void 0 !== s.left ? s.left : void 0 !== s.right ? s.right - a : 0),
          d.is(window) || d.is(document)
            ? ((d = l), 0, (e = 0))
            : ((n = d.offset()).top, (e = n.left)),
          l.scrollTop(),
          (e += l.scrollLeft()),
          !1 !== s.viewportConstrain &&
            ((r = Math.min(r, e + d.outerWidth() - a - this.margin)),
            (r = Math.max(r, e + this.margin))),
          this.el.css({ top: i - o.top, left: r - o.left });
      },
      trigger: function (t) {
        this.options[t] &&
          this.options[t].apply(this, Array.prototype.slice.call(arguments, 1));
      },
    }),
    ct = ht.extend({
      grid: null,
      rowCoords: null,
      colCoords: null,
      containerEl: null,
      minX: null,
      maxX: null,
      minY: null,
      maxY: null,
      constructor: function (t) {
        this.grid = t;
      },
      build: function () {
        (this.rowCoords = this.grid.computeRowCoords()),
          (this.colCoords = this.grid.computeColCoords()),
          this.computeBounds();
      },
      clear: function () {
        (this.rowCoords = null), (this.colCoords = null);
      },
      getCell: function (e, n) {
        var i,
          r,
          s = this.rowCoords,
          o = this.colCoords,
          a = null,
          l = null,
          d = null;
        if (!this.inBounds(e, n) && 'year' == this.grid.view.name)
          return (
            t.each(this.grid.view.dayGrids, function (t, i) {
              var r = i.coordMap;
              if ((r.computeBounds(), r.inBounds(e, n)))
                return r.build(), (d = r.getCell(e, n)), !1;
            }),
            d
          );
        for (i = 0; i < s.length; i++)
          if (((r = s[i]), n >= r.top && n < r.bottom)) {
            a = i;
            break;
          }
        for (i = 0; i < o.length; i++)
          if (((r = o[i]), e >= r.left && e < r.right)) {
            l = i;
            break;
          }
        return null !== a && null !== l
          ? (((d = this.grid.getCell(a, l)).grid = this.grid), d)
          : null;
      },
      computeBounds: function () {
        var t;
        this.containerEl &&
          ((t = this.containerEl.offset()),
          (this.minX = t.left),
          (this.maxX = t.left + this.containerEl.outerWidth()),
          (this.minY = t.top),
          (this.maxY = t.top + this.containerEl.outerHeight()));
      },
      inBounds: function (t, e) {
        return (
          !this.containerEl ||
          (t >= this.minX && t < this.maxX && e >= this.minY && e < this.maxY)
        );
      },
    }),
    ft = ht.extend({
      coordMaps: null,
      constructor: function (t) {
        this.coordMaps = t;
      },
      build: function () {
        var t,
          e = this.coordMaps;
        for (t = 0; t < e.length; t++) e[t].build();
      },
      getCell: function (t, e) {
        var n,
          i = this.coordMaps,
          r = null;
        for (n = 0; n < i.length && !r; n++) r = i[n].getCell(t, e);
        return r;
      },
      clear: function () {
        var t,
          e = this.coordMaps;
        for (t = 0; t < e.length; t++) e[t].clear();
      },
    }),
    gt = ht.extend({
      coordMap: null,
      options: null,
      isListening: !1,
      isDragging: !1,
      origCell: null,
      cell: null,
      mouseX0: null,
      mouseY0: null,
      mousemoveProxy: null,
      mouseupProxy: null,
      scrollEl: null,
      scrollBounds: null,
      scrollTopVel: null,
      scrollLeftVel: null,
      scrollIntervalId: null,
      scrollHandlerProxy: null,
      scrollSensitivity: 30,
      scrollSpeed: 200,
      scrollIntervalMs: 50,
      constructor: function (t, e) {
        (this.coordMap = t), (this.options = e || {});
      },
      mousedown: function (t) {
        D(t) &&
          (t.preventDefault(),
          this.startListening(t),
          this.options.distance || this.startDrag(t));
      },
      startListening: function (e) {
        var n, i;
        this.isListening ||
          (e &&
            this.options.scroll &&
            ((n = E(t(e.target))).is(window) ||
              n.is(document) ||
              ((this.scrollEl = n),
              (this.scrollHandlerProxy = W(
                t.proxy(this, 'scrollHandler'),
                100
              )),
              this.scrollEl.on('scroll', this.scrollHandlerProxy))),
          this.computeCoords(),
          e &&
            ((i = this.getCell(e)),
            (this.origCell = i),
            (this.mouseX0 = e.pageX),
            (this.mouseY0 = e.pageY)),
          t(document)
            .on('mousemove', (this.mousemoveProxy = t.proxy(this, 'mousemove')))
            .on('mouseup', (this.mouseupProxy = t.proxy(this, 'mouseup')))
            .on('selectstart', this.preventDefault),
          (this.isListening = !0),
          this.trigger('listenStart', e));
      },
      computeCoords: function () {
        this.coordMap.build(), this.computeScrollBounds();
      },
      mousemove: function (t) {
        var e;
        this.isDragging ||
          ((e = this.options.distance || 1),
          Math.pow(t.pageX - this.mouseX0, 2) +
            Math.pow(t.pageY - this.mouseY0, 2) >=
            e * e && this.startDrag(t)),
          this.isDragging && this.drag(t);
      },
      startDrag: function (t) {
        var e;
        this.isListening || this.startListening(),
          this.isDragging ||
            ((this.isDragging = !0),
            this.trigger('dragStart', t),
            (e = this.getCell(t)) && this.cellOver(e));
      },
      drag: function (t) {
        var e;
        this.isDragging &&
          (pt((e = this.getCell(t)), this.cell) ||
            (this.cell && this.cellOut(), e && this.cellOver(e)),
          this.dragScroll(t));
      },
      cellOver: function (t) {
        (this.cell = t), this.trigger('cellOver', t, pt(t, this.origCell));
      },
      cellOut: function () {
        this.cell && (this.trigger('cellOut', this.cell), (this.cell = null));
      },
      mouseup: function (t) {
        this.stopDrag(t), this.stopListening(t);
      },
      stopDrag: function (t) {
        this.isDragging &&
          (this.stopScrolling(),
          this.trigger('dragStop', t),
          (this.isDragging = !1));
      },
      stopListening: function (e) {
        this.isListening &&
          (this.scrollEl &&
            (this.scrollEl.off('scroll', this.scrollHandlerProxy),
            (this.scrollHandlerProxy = null)),
          t(document)
            .off('mousemove', this.mousemoveProxy)
            .off('mouseup', this.mouseupProxy)
            .off('selectstart', this.preventDefault),
          (this.mousemoveProxy = null),
          (this.mouseupProxy = null),
          (this.isListening = !1),
          this.trigger('listenStop', e),
          (this.origCell = this.cell = null),
          this.coordMap.clear());
      },
      getCell: function (t) {
        return this.coordMap.getCell(t.pageX, t.pageY);
      },
      trigger: function (t) {
        this.options[t] &&
          this.options[t].apply(this, Array.prototype.slice.call(arguments, 1));
      },
      preventDefault: function (t) {
        t.preventDefault();
      },
      computeScrollBounds: function () {
        var t,
          e = this.scrollEl;
        e &&
          ((t = e.offset()),
          (this.scrollBounds = {
            top: t.top,
            left: t.left,
            bottom: t.top + e.outerHeight(),
            right: t.left + e.outerWidth(),
          }));
      },
      dragScroll: function (t) {
        var e,
          n,
          i,
          r,
          s = this.scrollSensitivity,
          o = this.scrollBounds,
          a = 0,
          l = 0;
        o &&
          ((e = (s - (t.pageY - o.top)) / s),
          (n = (s - (o.bottom - t.pageY)) / s),
          (i = (s - (t.pageX - o.left)) / s),
          (r = (s - (o.right - t.pageX)) / s),
          e >= 0 && e <= 1
            ? (a = e * this.scrollSpeed * -1)
            : n >= 0 && n <= 1 && (a = n * this.scrollSpeed),
          i >= 0 && i <= 1
            ? (l = i * this.scrollSpeed * -1)
            : r >= 0 && r <= 1 && (l = r * this.scrollSpeed)),
          this.setScrollVel(a, l);
      },
      setScrollVel: function (e, n) {
        (this.scrollTopVel = e),
          (this.scrollLeftVel = n),
          this.constrainScrollVel(),
          (!this.scrollTopVel && !this.scrollLeftVel) ||
            this.scrollIntervalId ||
            (this.scrollIntervalId = setInterval(
              t.proxy(this, 'scrollIntervalFunc'),
              this.scrollIntervalMs
            ));
      },
      constrainScrollVel: function () {
        var t = this.scrollEl;
        this.scrollTopVel < 0
          ? t.scrollTop() <= 0 && (this.scrollTopVel = 0)
          : this.scrollTopVel > 0 &&
            t.scrollTop() + t[0].clientHeight >= t[0].scrollHeight &&
            (this.scrollTopVel = 0),
          this.scrollLeftVel < 0
            ? t.scrollLeft() <= 0 && (this.scrollLeftVel = 0)
            : this.scrollLeftVel > 0 &&
              t.scrollLeft() + t[0].clientWidth >= t[0].scrollWidth &&
              (this.scrollLeftVel = 0);
      },
      scrollIntervalFunc: function () {
        var t = this.scrollEl,
          e = this.scrollIntervalMs / 1e3;
        this.scrollTopVel && t.scrollTop(t.scrollTop() + this.scrollTopVel * e),
          this.scrollLeftVel &&
            t.scrollLeft(t.scrollLeft() + this.scrollLeftVel * e),
          this.constrainScrollVel(),
          this.scrollTopVel || this.scrollLeftVel || this.stopScrolling();
      },
      stopScrolling: function () {
        this.scrollIntervalId &&
          (clearInterval(this.scrollIntervalId),
          (this.scrollIntervalId = null),
          this.computeCoords());
      },
      scrollHandler: function () {
        this.scrollIntervalId || this.computeCoords();
      },
    });
  function pt(t, e) {
    return (
      (!t && !e) ||
      (!(!t || !e) && t.grid === e.grid && t.row === e.row && t.col === e.col)
    );
  }
  var mt = ht.extend({
      options: null,
      sourceEl: null,
      el: null,
      parentEl: null,
      top0: null,
      left0: null,
      mouseY0: null,
      mouseX0: null,
      topDelta: null,
      leftDelta: null,
      mousemoveProxy: null,
      isFollowing: !1,
      isHidden: !1,
      isAnimating: !1,
      constructor: function (e, n) {
        (this.options = n = n || {}),
          (this.sourceEl = e),
          (this.parentEl = n.parentEl ? t(n.parentEl) : e.parent());
      },
      start: function (e) {
        this.isFollowing ||
          ((this.isFollowing = !0),
          (this.mouseY0 = e.pageY),
          (this.mouseX0 = e.pageX),
          (this.topDelta = 0),
          (this.leftDelta = 0),
          this.isHidden || this.updatePosition(),
          t(document).on(
            'mousemove',
            (this.mousemoveProxy = t.proxy(this, 'mousemove'))
          ));
      },
      stop: function (e, n) {
        var i = this,
          r = this.options.revertDuration;
        function s() {
          (this.isAnimating = !1),
            i.destroyEl(),
            (this.top0 = this.left0 = null),
            n && n();
        }
        this.isFollowing &&
          !this.isAnimating &&
          ((this.isFollowing = !1),
          t(document).off('mousemove', this.mousemoveProxy),
          e && r && !this.isHidden
            ? ((this.isAnimating = !0),
              this.el.animate(
                { top: this.top0, left: this.left0 },
                { duration: r, complete: s }
              ))
            : s());
      },
      getEl: function () {
        var t = this.el;
        return (
          t ||
            (this.sourceEl.width(),
            (t = this.el =
              this.sourceEl
                .clone()
                .css({
                  position: 'absolute',
                  visibility: '',
                  display: this.isHidden ? 'none' : '',
                  margin: 0,
                  right: 'auto',
                  bottom: 'auto',
                  width: this.sourceEl.width(),
                  height: this.sourceEl.height(),
                  opacity: this.options.opacity || '',
                  zIndex: this.options.zIndex,
                })
                .appendTo(this.parentEl))),
          t
        );
      },
      destroyEl: function () {
        this.el && (this.el.remove(), (this.el = null));
      },
      updatePosition: function () {
        var t, e;
        this.getEl(),
          null === this.top0 &&
            (this.sourceEl.width(),
            (t = this.sourceEl.offset()),
            (e = this.el.offsetParent().offset()),
            (this.top0 = t.top - e.top),
            (this.left0 = t.left - e.left)),
          this.el.css({
            top: this.top0 + this.topDelta,
            left: this.left0 + this.leftDelta,
          });
      },
      mousemove: function (t) {
        (this.topDelta = t.pageY - this.mouseY0),
          (this.leftDelta = t.pageX - this.mouseX0),
          this.isHidden || this.updatePosition();
      },
      hide: function () {
        this.isHidden || ((this.isHidden = !0), this.el && this.el.hide());
      },
      show: function () {
        this.isHidden &&
          ((this.isHidden = !1), this.updatePosition(), this.getEl().show());
      },
    }),
    vt = ht.extend({
      view: null,
      isRTL: null,
      cellHtml: '<td></td>',
      constructor: function (t) {
        (this.view = t), (this.isRTL = t.opt('isRTL'));
      },
      rowHtml: function (t, e) {
        var n,
          i = this.getHtmlRenderer('cell', t),
          r = '';
        for (e = e || 0, n = 0; n < this.colCnt; n++)
          r += i(this.getCell(e, n));
        return '<tr>' + (r = this.bookendCells(r, t, e)) + '</tr>';
      },
      bookendCells: function (t, e, n) {
        var i = this.getHtmlRenderer('intro', e)(n || 0, this),
          r = this.getHtmlRenderer('outro', e)(n || 0, this),
          s = this.isRTL ? r : i,
          o = this.isRTL ? i : r;
        return 'string' == typeof t ? s + t + o : t.prepend(s).append(o);
      },
      getHtmlRenderer: function (t, e) {
        var n,
          i,
          r,
          s,
          o = this.view;
        return (
          (n = t + 'Html'),
          e && (i = e + O(t) + 'Html'),
          i && (s = o[i])
            ? (r = o)
            : i && (s = this[i])
            ? (r = this)
            : (s = o[n])
            ? (r = o)
            : (s = this[n]) && (r = this),
          'function' == typeof s
            ? function () {
                return s.apply(r, arguments) || '';
              }
            : function () {
                return s || '';
              }
        );
      },
    }),
    yt = (r.Grid = vt.extend({
      start: null,
      end: null,
      rowCnt: 0,
      colCnt: 0,
      rowData: null,
      colData: null,
      el: null,
      coordMap: null,
      elsByFill: null,
      documentDragStartProxy: null,
      colHeadFormat: null,
      eventTimeFormat: null,
      displayEventEnd: null,
      constructor: function () {
        vt.apply(this, arguments),
          (this.coordMap = new ct(this)),
          (this.elsByFill = {}),
          (this.documentDragStartProxy = t.proxy(this, 'documentDragStart'));
      },
      render: function () {
        this.bindHandlers();
      },
      destroy: function () {
        this.unbindHandlers();
      },
      computeColHeadFormat: function () {},
      computeEventTimeFormat: function () {
        return this.view.opt('smallTimeFormat');
      },
      computeDisplayEventEnd: function () {
        return !1;
      },
      setRange: function (t) {
        var e = this.view;
        (this.start = t.start.clone()),
          (this.end = t.end.clone()),
          (this.rowData = []),
          (this.colData = []),
          this.updateCells(),
          (this.colHeadFormat =
            e.opt('columnFormat') || this.computeColHeadFormat()),
          (this.eventTimeFormat =
            e.opt('timeFormat') || this.computeEventTimeFormat()),
          (this.displayEventEnd = e.opt('displayEventEnd')),
          null == this.displayEventEnd &&
            (this.displayEventEnd = this.computeDisplayEventEnd());
      },
      updateCells: function () {},
      rangeToSegs: function (t) {},
      getCell: function (e, n) {
        var i;
        return (
          null == n &&
            ('number' == typeof e
              ? ((n = e % this.colCnt), (e = Math.floor(e / this.colCnt)))
              : ((n = e.col), (e = e.row))),
          (i = { row: e, col: n }),
          t.extend(i, this.getRowData(e), this.getColData(n)),
          t.extend(i, this.computeCellRange(i)),
          i
        );
      },
      computeCellRange: function (t) {},
      getRowData: function (t) {
        return this.rowData[t] || {};
      },
      getColData: function (t) {
        return this.colData[t] || {};
      },
      getRowEl: function (t) {},
      getColEl: function (t) {},
      getCellDayEl: function (t) {
        return this.getColEl(t.col) || this.getRowEl(t.row);
      },
      computeRowCoords: function () {
        var t,
          e,
          n,
          i = [];
        for (t = 0; t < this.rowCnt; t++)
          (n = { top: (e = this.getRowEl(t)).offset().top }),
            t > 0 && (i[t - 1].bottom = n.top),
            i.push(n);
        return (n.bottom = n.top + e.outerHeight()), i;
      },
      computeColCoords: function () {
        var t,
          e,
          n,
          i = [];
        for (t = 0; t < this.colCnt; t++)
          (n = { left: (e = this.getColEl(t)).offset().left }),
            t > 0 && (i[t - 1].right = n.left),
            i.push(n);
        return (n.right = n.left + e.outerWidth()), i;
      },
      bindHandlers: function () {
        var e = this;
        this.el.on('mousedown', function (n) {
          t(n.target).is('.fc-event-container *, .fc-more') ||
            t(n.target).closest('.fc-popover').length ||
            e.dayMousedown(n);
        }),
          this.bindSegHandlers(),
          t(document).on('dragstart', this.documentDragStartProxy);
      },
      unbindHandlers: function () {
        t(document).off('dragstart', this.documentDragStartProxy);
      },
      dayMousedown: function (t) {
        var e,
          n,
          i = this,
          r = this.view,
          s = r.opt('selectable'),
          o = new gt(this.coordMap, {
            scroll: r.opt('dragScroll'),
            dragStart: function () {
              r.unselect();
            },
            cellOver: function (t, r) {
              var a = o.origCell;
              a &&
                ((e = r ? t : null),
                s &&
                  ((n = i.computeSelection(a, t))
                    ? i.renderSelection(n)
                    : p()));
            },
            cellOut: function (t) {
              (e = null), (n = null), i.destroySelection(), m();
            },
            listenStop: function (t) {
              e && r.trigger('dayClick', i.getCellDayEl(e), e.start, t),
                n && r.reportSelection(n, t),
                m();
            },
          });
        o.mousedown(t);
      },
      renderRangeHelper: function (t, e) {
        var n;
        ((n = e ? V(e.event) : {}).start = t.start.clone()),
          (n.end = t.end ? t.end.clone() : null),
          (n.allDay = null),
          this.view.calendar.normalizeEventDateProps(n),
          (n.className = (n.className || []).concat('fc-helper')),
          e || (n.editable = !1),
          this.renderHelper(n, e);
      },
      renderHelper: function (t, e) {},
      destroyHelper: function () {},
      renderSelection: function (t) {
        'year' != this.view.name ||
          t.rendered ||
          (this.view.destroySelection(),
          (t.rendered = !0),
          this.view.renderSelection(t, this)),
          this.renderHighlight(t);
      },
      destroySelection: function () {
        this.destroyHighlight();
      },
      computeSelection: function (t, e) {
        var n,
          i = [t.start, t.end, e.start, e.end];
        return (
          i.sort(B),
          (n = { start: i[0].clone(), end: i[3].clone() }),
          this.view.calendar.isSelectionRangeAllowed(n) ? n : null
        );
      },
      renderHighlight: function (t) {
        this.renderFill('highlight', this.rangeToSegs(t));
      },
      destroyHighlight: function () {
        this.destroyFill('highlight');
      },
      highlightSegClasses: function () {
        return ['fc-highlight'];
      },
      renderFill: function (t, e) {},
      destroyFill: function (t) {
        var e = this.elsByFill[t];
        e && (e.remove(), delete this.elsByFill[t]);
      },
      renderFillSegEls: function (e, n) {
        var i,
          r = this,
          s = this[e + 'SegEl'],
          o = '',
          a = [];
        if (n.length) {
          for (i = 0; i < n.length; i++) o += this.fillSegHtml(e, n[i]);
          t(o).each(function (e, i) {
            var o = n[e],
              l = t(i);
            s && (l = s.call(r, o, l)),
              l && (l = t(l)).is(r.fillSegTag) && ((o.el = l), a.push(o));
          });
        }
        return a;
      },
      fillSegTag: 'div',
      fillSegHtml: function (t, e) {
        var n = this[t + 'SegClasses'],
          i = this[t + 'SegStyles'],
          r = n ? n.call(this, e) : [],
          s = i ? i.call(this, e) : '';
        return (
          '<' +
          this.fillSegTag +
          (r.length ? ' class="' + r.join(' ') + '"' : '') +
          (s ? ' style="' + s + '"' : '') +
          ' ></' +
          this.fillSegTag +
          '>'
        );
      },
      headHtml: function () {
        return (
          '<div class="fc-row ' +
          this.view.widgetHeaderClass +
          '"><table><thead>' +
          this.rowHtml('head') +
          '</thead></table></div>'
        );
      },
      headCellHtml: function (t) {
        var e = this.view,
          n = t.start;
        return (
          '<th class="fc-day-header ' +
          e.widgetHeaderClass +
          ' fc-' +
          H[n.day()] +
          '">' +
          P(n.format(this.colHeadFormat)) +
          '</th>'
        );
      },
      bgCellHtml: function (t) {
        var e = this.view,
          n = t.start,
          i = this.getDayClasses(n);
        return (
          i.unshift('fc-day', e.widgetContentClass),
          '<td class="' +
            i.join(' ') +
            '" data-date="' +
            n.format('YYYY-MM-DD') +
            '"></td>'
        );
      },
      getDayClasses: function (t) {
        var e = this.view,
          n = e.calendar.getNow().stripTime(),
          i = ['fc-' + H[t.day()]];
        return (
          'month' === e.name &&
            t.month() != e.intervalStart.month() &&
            i.push('fc-other-month'),
          t.isSame(n, 'day')
            ? i.push('fc-today', e.highlightStateClass)
            : t < n
            ? i.push('fc-past')
            : i.push('fc-future'),
          i
        );
      },
    }));
  function wt(t) {
    return _((t.source || {}).rendering, t.rendering);
  }
  function bt(t, e) {
    return t.eventStartMS - e.eventStartMS;
  }
  function St(t, e) {
    return (
      t.eventStartMS - e.eventStartMS ||
      e.eventDurationMS - t.eventDurationMS ||
      e.event.allDay - t.event.allDay ||
      (t.event.title || '').localeCompare(e.event.title)
    );
  }
  yt.mixin({
    mousedOverSeg: null,
    isDraggingSeg: !1,
    isResizingSeg: !1,
    segs: null,
    renderEvents: function (t) {
      var e,
        n,
        i,
        r,
        s = this.eventsToSegs(t),
        o = [],
        a = [];
      for (e = 0; e < s.length; e++)
        (n = s[e]),
          (i = n.event),
          (r = void 0),
          'background' === (r = wt(i)) || 'inverse-background' === r
            ? o.push(n)
            : a.push(n);
      (o = this.renderBgSegs(o) || o),
        (a = this.renderFgSegs(a) || a),
        (this.segs = o.concat(a));
    },
    destroyEvents: function () {
      this.triggerSegMouseout(),
        this.destroyFgSegs(),
        this.destroyBgSegs(),
        (this.segs = null);
    },
    getEventSegs: function () {
      return this.segs || [];
    },
    renderFgSegs: function (t) {},
    destroyFgSegs: function () {},
    renderFgSegEls: function (e, n) {
      var i,
        r = this.view,
        s = '',
        o = [];
      if (e.length) {
        for (i = 0; i < e.length; i++) s += this.fgSegHtml(e[i], n);
        t(s).each(function (n, i) {
          var s = e[n],
            a = r.resolveEventEl(s.event, t(i));
          a && (a.data('fc-seg', s), (s.el = a), o.push(s));
        });
      }
      return o;
    },
    fgSegHtml: function (t, e) {},
    renderBgSegs: function (t) {
      return this.renderFill('bgEvent', t);
    },
    destroyBgSegs: function () {
      this.destroyFill('bgEvent');
    },
    bgEventSegEl: function (t, e) {
      return this.view.resolveEventEl(t.event, e);
    },
    bgEventSegClasses: function (t) {
      var e = t.event,
        n = e.source || {};
      return ['fc-bgevent'].concat(e.className, n.className || []);
    },
    bgEventSegStyles: function (t) {
      var e = this.view,
        n = t.event,
        i = n.source || {},
        r = n.color,
        s = i.color,
        o = e.opt('eventColor'),
        a =
          n.backgroundColor ||
          r ||
          i.backgroundColor ||
          s ||
          e.opt('eventBackgroundColor') ||
          o;
      return a ? 'background-color:' + a : '';
    },
    businessHoursSegClasses: function (t) {
      return ['fc-nonbusiness', 'fc-bgevent'];
    },
    bindSegHandlers: function () {
      var e = this,
        n = this.view;
      t.each(
        {
          mouseenter: function (t, n) {
            e.triggerSegMouseover(t, n);
          },
          mouseleave: function (t, n) {
            e.triggerSegMouseout(t, n);
          },
          click: function (t, e) {
            return n.trigger('eventClick', this, t.event, e);
          },
          mousedown: function (i, r) {
            t(r.target).is('.fc-resizer') && n.isEventResizable(i.event)
              ? e.segResizeMousedown(i, r)
              : n.isEventDraggable(i.event) && e.segDragMousedown(i, r);
          },
        },
        function (n, i) {
          e.el.on(n, '.fc-event-container > *', function (n) {
            var r = t(this).data('fc-seg');
            if (r && !e.isDraggingSeg && !e.isResizingSeg)
              return i.call(this, r, n);
          });
        }
      );
    },
    triggerSegMouseover: function (t, e) {
      this.mousedOverSeg ||
        ((this.mousedOverSeg = t),
        this.view.trigger('eventMouseover', t.el[0], t.event, e));
    },
    triggerSegMouseout: function (t, e) {
      (e = e || {}),
        this.mousedOverSeg &&
          ((t = t || this.mousedOverSeg),
          (this.mousedOverSeg = null),
          this.view.trigger('eventMouseout', t.el[0], t.event, e));
    },
    segDragMousedown: function (e, n) {
      var i,
        r = this,
        s = this.view,
        o = e.el,
        a = e.event;
      if ('year' == s.name) {
        var l = t(o).closest('td.fc-year-monthly-td'),
          d = l.closest('table').find('.fc-year-monthly-td').index(l);
        s.dayGrid = s.dayGrids[d];
      }
      var h = new mt(e.el, {
          parentEl: s.el,
          opacity: s.opt('dragOpacity'),
          revertDuration: s.opt('dragRevertDuration'),
          zIndex: 2,
        }),
        u = new gt(s.coordMap, {
          distance: 5,
          scroll: s.opt('dragScroll'),
          listenStart: function (t) {
            h.hide(), h.start(t);
          },
          dragStart: function (t) {
            r.triggerSegMouseout(e, t),
              (r.isDraggingSeg = !0),
              s.hideEvent(a),
              s.trigger('eventDragStart', o[0], a, t, {});
          },
          cellOver: function (t, n) {
            var o = e.cell || u.origCell;
            (i = r.computeEventDrop(o, t, a))
              ? (s.renderDrag(i, e) ? h.hide() : h.show(), n && (i = null))
              : (h.show(), p());
          },
          cellOut: function () {
            (i = null), s.destroyDrag(), h.show(), m();
          },
          dragStop: function (t) {
            h.stop(!i, function () {
              (r.isDraggingSeg = !1),
                s.destroyDrag(),
                s.showEvent(a),
                s.trigger('eventDragStop', o[0], a, t, {}),
                i && s.reportEventDrop(a, i, o, t);
            }),
              m();
          },
          listenStop: function () {
            h.stop();
          },
        });
      u.mousedown(n);
    },
    computeEventDrop: function (t, e, n) {
      var i,
        r,
        s,
        o,
        a,
        l = t.start,
        d = e.start;
      return (
        l.hasTime() === d.hasTime()
          ? ((i = R(d, l)),
            (r = n.start.clone().add(i)),
            (s = null === n.end ? null : n.end.clone().add(i)),
            (o = n.allDay))
          : ((r = d.clone()), (s = null), (o = !d.hasTime())),
        (a = { start: r, end: s, allDay: o }),
        this.view.calendar.isEventRangeAllowed(a, n) ? a : null
      );
    },
    documentDragStart: function (e, n) {
      var i,
        r,
        s = this.view;
      s.opt('droppable') &&
        ((i = t(e.target)),
        (r = s.opt('dropAccept')),
        (t.isFunction(r) ? r.call(i[0], i) : i.is(r)) &&
          this.startExternalDrag(i, e, n));
    },
    startExternalDrag: function (n, i, s) {
      var o,
        a,
        l = this,
        d = (function (n) {
          var i,
            s,
            o,
            a,
            l = r.dataAttrPrefix;
          l && (l += '-');
          (i = n.data(l + 'event') || null) &&
            ((i = 'object' == typeof i ? t.extend({}, i) : {}),
            null == (s = i.start) && (s = i.time),
            (o = i.duration),
            (a = i.stick),
            delete i.start,
            delete i.time,
            delete i.duration,
            delete i.stick);
          null == s && (s = n.data(l + 'start'));
          null == s && (s = n.data(l + 'time'));
          null == o && (o = n.data(l + 'duration'));
          null == a && (a = n.data(l + 'stick'));
          return (
            (s = null != s ? e.duration(s) : null),
            (o = null != o ? e.duration(o) : null),
            (a = Boolean(a)),
            { eventProps: i, startTime: s, duration: o, stick: a }
          );
        })(n);
      (o = new gt(this.coordMap, {
        cellOver: function (t) {
          (a = l.computeExternalDrop(t, d)) ? l.renderDrag(a) : p();
        },
        cellOut: function () {
          (a = null), l.destroyDrag(), m();
        },
      })),
        t(document).one('dragstop', function (t, e) {
          l.destroyDrag(), m(), a && l.view.reportExternalDrop(d, a, n, t, e);
        }),
        o.startDrag(i);
    },
    computeExternalDrop: function (t, e) {
      var n = { start: t.start.clone(), end: null };
      return (
        e.startTime && !n.start.hasTime() && n.start.time(e.startTime),
        e.duration && (n.end = n.start.clone().add(e.duration)),
        this.view.calendar.isExternalDropRangeAllowed(n, e.eventProps)
          ? n
          : null
      );
    },
    renderDrag: function (t, e) {},
    destroyDrag: function () {},
    segResizeMousedown: function (e, n) {
      var i,
        r = this,
        s = this.view,
        o = s.calendar,
        a = e.el,
        l = e.event,
        d = l.start,
        h = o.getEventEnd(l);
      function u() {
        r.destroyEventResize(), s.showEvent(l), m();
      }
      new gt(this.coordMap, {
        distance: 5,
        scroll: s.opt('dragScroll'),
        dragStart: function (t) {
          r.triggerSegMouseout(e, t),
            (r.isResizingSeg = !0),
            s.trigger('eventResizeStart', a[0], l, t, {});
        },
        cellOver: function (n) {
          (i = n.end).isAfter(d) || (i = d.clone().add(R(n.end, n.start))),
            i.isSame(h)
              ? (i = null)
              : o.isEventRangeAllowed({ start: d, end: i }, l)
              ? (r.renderEventResize({ start: d, end: i }, e),
                'year' == s.name &&
                  t.each(s.dayGrids, function (t, n) {
                    n !== r &&
                      (n.destroyEventResize(),
                      n.renderEventResize({ start: d, end: i }, e));
                  }),
                s.hideEvent(l))
              : ((i = null), p());
        },
        cellOut: function () {
          (i = null), u();
        },
        dragStop: function (t) {
          (r.isResizingSeg = !1),
            u(),
            s.trigger('eventResizeStop', a[0], l, t, {}),
            i && s.reportEventResize(l, i, a, t);
        },
      }).mousedown(n);
    },
    renderEventResize: function (t, e) {},
    destroyEventResize: function () {},
    getEventTimeText: function (t, e) {
      return (
        (e = e || this.eventTimeFormat),
        t.end && this.displayEventEnd
          ? this.view.formatRange(t, e)
          : t.start.format(e)
      );
    },
    getSegClasses: function (t, e, n) {
      var i = t.event,
        r = [
          'fc-event',
          t.isStart ? 'fc-start' : 'fc-not-start',
          t.isEnd ? 'fc-end' : 'fc-not-end',
        ].concat(i.className, i.source ? i.source.className : []);
      return e && r.push('fc-draggable'), n && r.push('fc-resizable'), r;
    },
    getEventSkinCss: function (t) {
      var e = this.view,
        n = t.source || {},
        i = t.color,
        r = n.color,
        s = e.opt('eventColor'),
        o =
          t.backgroundColor ||
          i ||
          n.backgroundColor ||
          r ||
          e.opt('eventBackgroundColor') ||
          s,
        a =
          t.borderColor ||
          i ||
          n.borderColor ||
          r ||
          e.opt('eventBorderColor') ||
          s,
        l = t.textColor || n.textColor || e.opt('eventTextColor'),
        d = [];
      return (
        o && d.push('background-color:' + o),
        a && d.push('border-color:' + a),
        l && d.push('color:' + l),
        d.join(';')
      );
    },
    eventsToSegs: function (t, e) {
      var n,
        i = this.eventsToRanges(t),
        r = [];
      for (n = 0; n < i.length; n++)
        r.push.apply(r, this.eventRangeToSegs(i[n], e));
      return r;
    },
    eventsToRanges: function (e) {
      var n = this,
        i = (function (t) {
          var e,
            n,
            i = {};
          for (e = 0; e < t.length; e++)
            (n = t[e]), (i[n._id] || (i[n._id] = [])).push(n);
          return i;
        })(e),
        r = [];
      return (
        t.each(i, function (t, e) {
          e.length &&
            r.push.apply(
              r,
              'inverse-background' === wt(e[0])
                ? n.eventsToInverseRanges(e)
                : n.eventsToNormalRanges(e)
            );
        }),
        r
      );
    },
    eventsToNormalRanges: function (t) {
      var e,
        n,
        i,
        r,
        s = this.view.calendar,
        o = [];
      for (e = 0; e < t.length; e++)
        (i = (n = t[e]).start.clone().stripZone()),
          (r = s.getEventEnd(n).stripZone()),
          o.push({
            event: n,
            start: i,
            end: r,
            eventStartMS: +i,
            eventDurationMS: r - i,
          });
      return o;
    },
    eventsToInverseRanges: function (t) {
      var e,
        n,
        i = this.view,
        r = i.start.clone().stripZone(),
        s = i.end.clone().stripZone(),
        o = this.eventsToNormalRanges(t),
        a = [],
        l = t[0],
        d = r;
      for (o.sort(bt), e = 0; e < o.length; e++)
        (n = o[e]).start > d && a.push({ event: l, start: d, end: n.start }),
          (d = n.end);
      return d < s && a.push({ event: l, start: d, end: s }), a;
    },
    eventRangeToSegs: function (t, e) {
      var n, i, r;
      for (n = e ? e(t) : this.rangeToSegs(t), i = 0; i < n.length; i++)
        ((r = n[i]).event = t.event),
          (r.eventStartMS = t.eventStartMS),
          (r.eventDurationMS = t.eventDurationMS);
      return n;
    },
  }),
    (r.compareSegs = St),
    (r.dataAttrPrefix = '');
  var Et = yt.extend({
    numbersVisible: !1,
    bottomCoordPadding: 0,
    breakOnWeeks: null,
    cellDates: null,
    dayToCellOffsets: null,
    rowEls: null,
    dayEls: null,
    helperEls: null,
    render: function (t) {
      var e,
        n,
        i,
        r = this.view,
        s = this.rowCnt,
        o = s * this.colCnt,
        a = '';
      for (e = 0; e < s; e++) a += this.dayRowHtml(e, t);
      for (
        this.el.html(a),
          this.rowEls = this.el.find('.fc-row'),
          this.dayEls = this.el.find('.fc-day'),
          n = 0;
        n < o;
        n++
      )
        (i = this.getCell(n)),
          r.trigger('dayRender', null, i.start, this.dayEls.eq(n));
      yt.prototype.render.call(this);
    },
    destroy: function () {
      this.destroySegPopover(), yt.prototype.destroy.call(this);
    },
    dayRowHtml: function (t, e) {
      var n = ['fc-row', 'fc-week', this.view.widgetContentClass];
      return (
        e && n.push('fc-rigid'),
        '<div class="' +
          n.join(' ') +
          '"><div class="fc-bg"><table>' +
          this.rowHtml('day', t) +
          '</table></div><div class="fc-content-skeleton"><table>' +
          (this.numbersVisible
            ? '<thead>' + this.rowHtml('number', t) + '</thead>'
            : '') +
          '</table></div></div>'
      );
    },
    dayCellHtml: function (t) {
      return this.bgCellHtml(t);
    },
    computeColHeadFormat: function () {
      return this.rowCnt > 1
        ? 'ddd'
        : this.colCnt > 1
        ? this.view.opt('dayOfMonthFormat')
        : 'dddd';
    },
    computeEventTimeFormat: function () {
      return this.view.opt('extraSmallTimeFormat');
    },
    computeDisplayEventEnd: function () {
      return 1 == this.colCnt;
    },
    updateCells: function () {
      var t, e, n, i;
      if ((this.updateCellDates(), (t = this.cellDates), this.breakOnWeeks)) {
        for (e = t[0].day(), i = 1; i < t.length && t[i].day() != e; i++);
        n = Math.ceil(t.length / i);
      } else (n = 1), (i = t.length);
      (this.rowCnt = n), (this.colCnt = i);
    },
    updateCellDates: function () {
      for (
        var t = this.view, e = this.start.clone(), n = [], i = -1, r = [];
        e.isBefore(this.end);

      )
        t.isHiddenDay(e)
          ? r.push(i + 0.5)
          : (i++, r.push(i), n.push(e.clone())),
          e.add(1, 'days');
      (this.cellDates = n), (this.dayToCellOffsets = r);
    },
    computeCellRange: function (t) {
      var e = this.colCnt,
        n = t.row * e + (this.isRTL ? e - t.col - 1 : t.col),
        i = this.cellDates[n].clone(),
        r = i.clone().add(1, 'day');
      return { start: i, end: r };
    },
    getRowEl: function (t) {
      return this.rowEls.eq(t);
    },
    getColEl: function (t) {
      return this.dayEls.eq(t);
    },
    getCellDayEl: function (t) {
      return this.dayEls.eq(t.row * this.colCnt + t.col);
    },
    computeRowCoords: function () {
      var t = yt.prototype.computeRowCoords.call(this);
      return (t[t.length - 1].bottom += this.bottomCoordPadding), t;
    },
    rangeToSegs: function (t) {
      var e,
        n,
        i,
        r,
        s,
        o,
        a,
        l,
        d,
        h,
        u = this.isRTL,
        c = this.rowCnt,
        f = this.colCnt,
        g = [];
      for (
        t = this.view.computeDayRange(t),
          e = this.dateToCellOffset(t.start),
          n = this.dateToCellOffset(t.end.subtract(1, 'days')),
          i = 0;
        i < c;
        i++
      )
        (s = (r = i * f) + f - 1),
          (l = Math.max(r, e)),
          (d = Math.min(s, n)),
          (l = Math.ceil(l)) <= (d = Math.floor(d)) &&
            ((o = l === e),
            (a = d === n),
            (l -= r),
            (d -= r),
            (h = { row: i, isStart: o, isEnd: a }),
            u
              ? ((h.leftCol = f - d - 1), (h.rightCol = f - l - 1))
              : ((h.leftCol = l), (h.rightCol = d)),
            g.push(h));
      return g;
    },
    dateToCellOffset: function (t) {
      var e = this.dayToCellOffsets,
        n = t.diff(this.start, 'days');
      return n < 0 ? e[0] - 1 : n >= e.length ? e[e.length - 1] + 1 : e[n];
    },
    renderDrag: function (t, e) {
      var n;
      if (
        (this.renderHighlight(this.view.calendar.ensureVisibleEventRange(t)),
        e && !e.el.closest(this.view.el).length)
      )
        return (
          this.renderRangeHelper(t, e),
          void 0 !== (n = this.view.opt('dragOpacity')) &&
            this.helperEls.css('opacity', n),
          !0
        );
    },
    destroyDrag: function () {
      this.destroyHighlight(), this.destroyHelper();
    },
    renderEventResize: function (t, e) {
      this.renderHighlight(t), this.renderRangeHelper(t, e);
    },
    destroyEventResize: function () {
      this.destroyHighlight(), this.destroyHelper();
    },
    renderHelper: function (e, n) {
      var i,
        r = [],
        s = this.eventsToSegs([e]);
      (s = this.renderFgSegEls(s)),
        (i = this.renderSegRows(s)),
        this.rowEls.each(function (e, s) {
          var o,
            a = t(s),
            l = t('<div class="fc-helper-skeleton"><table></table></div>');
          (o =
            n && n.row === e
              ? n.el.position().top
              : a.find('.fc-content-skeleton tbody').position().top),
            l.css('top', o).find('table').append(i[e].tbodyEl),
            a.append(l),
            r.push(l[0]);
        }),
        (this.helperEls = t(r));
    },
    destroyHelper: function () {
      this.helperEls && (this.helperEls.remove(), (this.helperEls = null));
    },
    fillSegTag: 'td',
    renderFill: function (e, n) {
      var i,
        r,
        s,
        o = [];
      for (n = this.renderFillSegEls(e, n), i = 0; i < n.length; i++)
        (r = n[i]),
          (s = this.renderFillRow(e, r)),
          this.rowEls.eq(r.row).append(s),
          o.push(s[0]);
      return (this.elsByFill[e] = t(o)), n;
    },
    renderFillRow: function (e, n) {
      var i,
        r,
        s = this.colCnt,
        o = n.leftCol,
        a = n.rightCol + 1;
      return (
        (r = (i = t(
          '<div class="fc-' +
            e.toLowerCase() +
            '-skeleton"><table><tr></tr></table></div>'
        )).find('tr')),
        o > 0 && r.append('<td colspan="' + o + '"></td>'),
        r.append(n.el.attr('colspan', a - o)),
        a < s && r.append('<td colspan="' + (s - a) + '"></td>'),
        this.bookendCells(r, e),
        i
      );
    },
  });
  function Ct(t, e) {
    var n, i;
    for (n = 0; n < e.length; n++)
      if ((i = e[n]).leftCol <= t.rightCol && i.rightCol >= t.leftCol)
        return !0;
    return !1;
  }
  function Dt(t, e) {
    return t.leftCol - e.leftCol;
  }
  Et.mixin({
    rowStructs: null,
    destroyEvents: function () {
      this.destroySegPopover(),
        yt.prototype.destroyEvents.apply(this, arguments);
    },
    getEventSegs: function () {
      return yt.prototype.getEventSegs
        .call(this)
        .concat(this.popoverSegs || []);
    },
    renderBgSegs: function (e) {
      var n = t.grep(e, function (t) {
        return t.event.allDay;
      });
      return yt.prototype.renderBgSegs.call(this, n);
    },
    renderFgSegs: function (e) {
      var n;
      return (
        (e = this.renderFgSegEls(e)),
        (n = this.rowStructs = this.renderSegRows(e)),
        this.rowEls.each(function (e, i) {
          e < n.length &&
            t(i).find('.fc-content-skeleton > table').append(n[e].tbodyEl);
        }),
        e
      );
    },
    destroyFgSegs: function () {
      for (var t, e = this.rowStructs || []; (t = e.pop()); )
        t.tbodyEl.remove();
      this.rowStructs = null;
    },
    renderSegRows: function (t) {
      var e,
        n,
        i = [];
      for (e = this.groupSegRows(t), n = 0; n < e.length; n++)
        i.push(this.renderSegRow(n, e[n]));
      return i;
    },
    fgSegHtml: function (t, e) {
      var n,
        i = this.view,
        r = t.event,
        s = i.isEventDraggable(r),
        o = !e && r.allDay && t.isEnd && i.isEventResizable(r),
        a = this.getSegClasses(t, s, o),
        l = this.getEventSkinCss(r),
        d = '';
      return (
        a.unshift('fc-day-grid-event'),
        !r.allDay &&
          t.isStart &&
          (d =
            '<span class="fc-time">' + P(this.getEventTimeText(r)) + '</span>'),
        (n =
          '<span class="fc-title">' +
          (P(r.title || '') || '&nbsp;') +
          '</span>'),
        '<a class="' +
          a.join(' ') +
          '"' +
          (r.url ? ' href="' + P(r.url) + '"' : '') +
          (l ? ' style="' + l + '"' : '') +
          '><div class="fc-content">' +
          (this.isRTL ? n + ' ' + d : d + ' ' + n) +
          '</div>' +
          (o ? '<div class="fc-resizer"></div>' : '') +
          '</a>'
      );
    },
    renderSegRow: function (e, n) {
      var i,
        r,
        s,
        o,
        a,
        l,
        d,
        h = this.colCnt,
        u = this.buildSegLevels(n),
        c = Math.max(1, u.length),
        f = t('<tbody></tbody>'),
        g = [],
        p = [],
        m = [];
      function v(e) {
        for (; s < e; )
          (d = (m[i - 1] || [])[s])
            ? d.attr('rowspan', parseInt(d.attr('rowspan') || 1, 10) + 1)
            : ((d = t('<td></td>')), o.append(d)),
            (p[i][s] = d),
            (m[i][s] = d),
            s++;
      }
      for (i = 0; i < c; i++) {
        if (
          ((r = u[i]),
          (s = 0),
          (o = t('<tr></tr>')),
          g.push([]),
          p.push([]),
          m.push([]),
          r)
        )
          for (a = 0; a < r.length; a++) {
            for (
              v((l = r[a]).leftCol),
                d = t('<td class="fc-event-container"></td>').append(l.el),
                l.leftCol != l.rightCol
                  ? d.attr('colspan', l.rightCol - l.leftCol + 1)
                  : (m[i][s] = d);
              s <= l.rightCol;

            )
              (p[i][s] = d), (g[i][s] = l), s++;
            o.append(d);
          }
        v(h), this.bookendCells(o, 'eventSkeleton'), f.append(o);
      }
      return {
        row: e,
        tbodyEl: f,
        cellMatrix: p,
        segMatrix: g,
        segLevels: u,
        segs: n,
      };
    },
    buildSegLevels: function (t) {
      var e,
        n,
        i,
        r = [];
      for (t.sort(St), e = 0; e < t.length; e++) {
        for (n = t[e], i = 0; i < r.length && Ct(n, r[i]); i++);
        (n.level = i), (r[i] || (r[i] = [])).push(n);
      }
      for (i = 0; i < r.length; i++) r[i].sort(Dt);
      return r;
    },
    groupSegRows: function (t) {
      var e,
        n = [];
      for (e = 0; e < this.rowCnt; e++) n.push([]);
      for (e = 0; e < t.length; e++) n[t[e].row].push(t[e]);
      return n;
    },
  }),
    Et.mixin({
      segPopover: null,
      popoverSegs: null,
      destroySegPopover: function () {
        this.segPopover && this.segPopover.hide();
      },
      limitRows: function (t) {
        var e,
          n,
          i = this.rowStructs || [];
        for (e = 0; e < i.length; e++)
          this.unlimitRow(e),
            !1 !==
              (n =
                !!t &&
                ('number' == typeof t ? t : this.computeRowLevelLimit(e))) &&
              this.limitRow(e, n);
      },
      computeRowLevelLimit: function (t) {
        var e,
          n,
          i = this.rowEls.eq(t).height(),
          r = this.rowStructs[t].tbodyEl.children();
        for (e = 0; e < r.length; e++)
          if (
            (n = r.eq(e).removeClass('fc-limited')).position().top +
              n.outerHeight() >
            i
          )
            return e;
        return !1;
      },
      limitRow: function (e, n) {
        var i,
          r,
          s,
          o,
          a,
          l,
          d,
          h,
          u,
          c,
          f,
          g,
          p,
          m,
          v,
          y,
          w = this,
          b = this.rowStructs[e],
          S = [],
          E = 0;
        function C(r) {
          for (; E < r; )
            (i = w.getCell(e, E)),
              (d = w.getCellSegs(i, n)).length &&
                ((c = s[n - 1][E]),
                (y = w.renderMoreLink(i, d)),
                (v = t('<div></div>').append(y)),
                c.append(v),
                S.push(v[0])),
              E++;
        }
        if (n && n < b.segLevels.length) {
          for (
            r = b.segLevels[n - 1],
              s = b.cellMatrix,
              o = b.tbodyEl.children().slice(n).addClass('fc-limited').get(),
              a = 0;
            a < r.length;
            a++
          ) {
            for (C((l = r[a]).leftCol), u = [], h = 0; E <= l.rightCol; )
              (i = this.getCell(e, E)),
                (d = this.getCellSegs(i, n)),
                u.push(d),
                (h += d.length),
                E++;
            if (h) {
              for (
                f = (c = s[n - 1][l.leftCol]).attr('rowspan') || 1,
                  g = [],
                  p = 0;
                p < u.length;
                p++
              )
                (m = t('<td class="fc-more-cell"></td>').attr('rowspan', f)),
                  (d = u[p]),
                  (i = this.getCell(e, l.leftCol + p)),
                  (y = this.renderMoreLink(i, [l].concat(d))),
                  (v = t('<div></div>').append(y)),
                  m.append(v),
                  g.push(m[0]),
                  S.push(m[0]);
              c.addClass('fc-limited').after(t(g)), o.push(c[0]);
            }
          }
          C(this.colCnt), (b.moreEls = t(S)), (b.limitedEls = t(o));
        }
      },
      unlimitRow: function (t) {
        var e = this.rowStructs[t];
        e.moreEls && (e.moreEls.remove(), (e.moreEls = null)),
          e.limitedEls &&
            (e.limitedEls.removeClass('fc-limited'), (e.limitedEls = null));
      },
      renderMoreLink: function (e, n) {
        var i = this,
          r = this.view;
        return t('<a class="fc-more"></a>')
          .text(this.getMoreLinkText(n.length))
          .on('click', function (s) {
            var o = r.opt('eventLimitClick'),
              a = e.start,
              l = t(this),
              d = i.getCellDayEl(e),
              h = i.getCellSegs(e),
              u = i.resliceDaySegs(h, a),
              c = i.resliceDaySegs(n, a);
            'function' == typeof o &&
              (o = r.trigger(
                'eventLimitClick',
                null,
                { date: a, dayEl: d, moreEl: l, segs: u, hiddenSegs: c },
                s
              )),
              'popover' === o
                ? i.showSegPopover(e, l, u)
                : 'string' == typeof o && r.calendar.zoomTo(a, o);
          });
      },
      showSegPopover: function (t, e, n) {
        var i,
          r,
          s = this,
          o = this.view,
          a = e.parent();
        (i = 1 == this.rowCnt ? o.el : this.rowEls.eq(t.row)),
          (r = {
            className: 'fc-more-popover',
            content: this.renderSegPopoverContent(t, n),
            parentEl: this.el,
            top: i.offset().top,
            autoHide: !0,
            viewportConstrain: o.opt('popoverViewportConstrain'),
            hide: function () {
              s.segPopover.destroy(),
                (s.segPopover = null),
                (s.popoverSegs = null);
            },
          }),
          this.isRTL
            ? (r.right = a.offset().left + a.outerWidth() + 1)
            : (r.left = a.offset().left - 1),
          (this.segPopover = new ut(r)),
          this.segPopover.show();
      },
      renderSegPopoverContent: function (e, n) {
        var i,
          r = this.view,
          s = r.opt('theme'),
          o = e.start.format(r.opt('dayPopoverFormat')),
          a = t(
            '<div class="fc-header ' +
              r.widgetHeaderClass +
              '"><span class="fc-close ' +
              (s ? 'ui-icon ui-icon-closethick' : 'fc-icon fc-icon-x') +
              '"></span><span class="fc-title">' +
              P(o) +
              '</span><div class="fc-clear"></div></div><div class="fc-body ' +
              r.widgetContentClass +
              '"><div class="fc-event-container"></div></div>'
          ),
          l = a.find('.fc-event-container');
        for (
          n = this.renderFgSegEls(n, !0), this.popoverSegs = n, i = 0;
          i < n.length;
          i++
        )
          (n[i].cell = e), l.append(n[i].el);
        return a;
      },
      resliceDaySegs: function (e, n) {
        var i = t.map(e, function (t) {
            return t.event;
          }),
          r = n.clone().stripTime(),
          s = r.clone().add(1, 'days'),
          o = { start: r, end: s };
        return (
          (e = this.eventsToSegs(i, function (t) {
            var e = T(t, o);
            return e ? [e] : [];
          })).sort(St),
          e
        );
      },
      getMoreLinkText: function (t) {
        var e = this.view.opt('eventLimitText');
        return 'function' == typeof e ? e(t) : '+' + t + ' ' + e;
      },
      getCellSegs: function (t, e) {
        for (
          var n, i = this.rowStructs[t.row].segMatrix, r = e || 0, s = [];
          r < i.length;

        )
          (n = i[r][t.col]) && s.push(n), r++;
        return s;
      },
    });
  var Tt = yt.extend({
    slotDuration: null,
    snapDuration: null,
    minTime: null,
    maxTime: null,
    axisFormat: null,
    dayEls: null,
    slatEls: null,
    slatTops: null,
    helperEl: null,
    businessHourSegs: null,
    constructor: function () {
      yt.apply(this, arguments), this.processOptions();
    },
    render: function () {
      this.el.html(this.renderHtml()),
        (this.dayEls = this.el.find('.fc-day')),
        (this.slatEls = this.el.find('.fc-slats tr')),
        this.computeSlatTops(),
        this.renderBusinessHours(),
        yt.prototype.render.call(this);
    },
    renderBusinessHours: function () {
      var t = this.view.calendar.getBusinessHoursEvents();
      this.businessHourSegs = this.renderFill(
        'businessHours',
        this.eventsToSegs(t),
        'bgevent'
      );
    },
    renderHtml: function () {
      return (
        '<div class="fc-bg"><table>' +
        this.rowHtml('slotBg') +
        '</table></div><div class="fc-slats"><table>' +
        this.slatRowHtml() +
        '</table></div>'
      );
    },
    slotBgCellHtml: function (t) {
      return this.bgCellHtml(t);
    },
    slatRowHtml: function () {
      for (
        var t,
          n,
          i,
          r = this.view,
          s = this.isRTL,
          o = '',
          a = this.slotDuration.asMinutes() % 15 == 0,
          l = e.duration(+this.minTime);
        l < this.maxTime;

      )
        (n = (t = this.start.clone().time(l)).minutes()),
          (i =
            '<td class="fc-axis fc-time ' +
            r.widgetContentClass +
            '" ' +
            r.axisStyleAttr() +
            '>' +
            (a && n
              ? ''
              : '<span>' + P(t.format(this.axisFormat)) + '</span>') +
            '</td>'),
          (o +=
            '<tr ' +
            (n ? 'class="fc-minor"' : '') +
            '>' +
            (s ? '' : i) +
            '<td class="' +
            r.widgetContentClass +
            '"></td>' +
            (s ? i : '') +
            '</tr>'),
          l.add(this.slotDuration);
      return o;
    },
    processOptions: function () {
      var t = this.view,
        n = t.opt('slotDuration'),
        i = t.opt('snapDuration');
      (n = e.duration(n)),
        (i = i ? e.duration(i) : n),
        (this.slotDuration = n),
        (this.snapDuration = i),
        (this.minTime = e.duration(t.opt('minTime'))),
        (this.maxTime = e.duration(t.opt('maxTime'))),
        (this.axisFormat = t.opt('axisFormat') || t.opt('smallTimeFormat'));
    },
    computeColHeadFormat: function () {
      return this.colCnt > 1 ? this.view.opt('dayOfMonthFormat') : 'dddd';
    },
    computeEventTimeFormat: function () {
      return this.view.opt('noMeridiemTimeFormat');
    },
    computeDisplayEventEnd: function () {
      return !0;
    },
    updateCells: function () {
      var t,
        e = this.view,
        n = [];
      for (t = this.start.clone(); t.isBefore(this.end); )
        n.push({ day: t.clone() }), t.add(1, 'day'), (t = e.skipHiddenDays(t));
      this.isRTL && n.reverse(),
        (this.colData = n),
        (this.colCnt = n.length),
        (this.rowCnt = Math.ceil(
          (this.maxTime - this.minTime) / this.snapDuration
        ));
    },
    computeCellRange: function (t) {
      var e = this.computeSnapTime(t.row),
        n = this.view.calendar.rezoneDate(t.day).time(e),
        i = n.clone().add(this.snapDuration);
      return { start: n, end: i };
    },
    getColEl: function (t) {
      return this.dayEls.eq(t);
    },
    computeSnapTime: function (t) {
      return e.duration(this.minTime + this.snapDuration * t);
    },
    rangeToSegs: function (t) {
      var e,
        n,
        i,
        r = this.colCnt,
        s = [];
      for (
        t = {
          start: t.start.clone().stripZone(),
          end: t.end.clone().stripZone(),
        },
          n = 0;
        n < r;
        n++
      )
        (e = T(t, {
          start: (i = this.colData[n].day).clone().time(this.minTime),
          end: i.clone().time(this.maxTime),
        })) && ((e.col = n), s.push(e));
      return s;
    },
    resize: function () {
      this.computeSlatTops(), this.updateSegVerticals();
    },
    computeRowCoords: function () {
      var t,
        e,
        n = this.el.offset().top,
        i = [];
      for (t = 0; t < this.rowCnt; t++)
        (e = { top: n + this.computeTimeTop(this.computeSnapTime(t)) }),
          t > 0 && (i[t - 1].bottom = e.top),
          i.push(e);
      return (
        (e.bottom = e.top + this.computeTimeTop(this.computeSnapTime(t))), i
      );
    },
    computeDateTop: function (t, n) {
      return this.computeTimeTop(
        e.duration(t.clone().stripZone() - n.clone().stripTime())
      );
    },
    computeTimeTop: function (t) {
      var e,
        n,
        i,
        r = (t - this.minTime) / this.slotDuration;
      return (
        (r = Math.max(0, r)),
        (n = (r = Math.min(this.slatEls.length, r)) - (e = Math.floor(r))),
        (i = this.slatTops[e]),
        n ? i + (this.slatTops[e + 1] - i) * n : i
      );
    },
    computeSlatTops: function () {
      var e,
        n = [];
      this.slatEls.each(function (i, r) {
        (e = t(r).position().top), n.push(e);
      }),
        n.push(e + this.slatEls.last().outerHeight()),
        (this.slatTops = n);
    },
    renderDrag: function (t, e) {
      var n;
      if (e)
        return (
          this.renderRangeHelper(t, e),
          void 0 !== (n = this.view.opt('dragOpacity')) &&
            this.helperEl.css('opacity', n),
          !0
        );
      this.renderHighlight(this.view.calendar.ensureVisibleEventRange(t));
    },
    destroyDrag: function () {
      this.destroyHelper(), this.destroyHighlight();
    },
    renderEventResize: function (t, e) {
      this.renderRangeHelper(t, e);
    },
    destroyEventResize: function () {
      this.destroyHelper();
    },
    renderHelper: function (e, n) {
      var i,
        r,
        s,
        o,
        a = this.eventsToSegs([e]);
      for (
        a = this.renderFgSegEls(a), i = this.renderSegTable(a), r = 0;
        r < a.length;
        r++
      )
        (s = a[r]),
          n &&
            n.col === s.col &&
            ((o = n.el),
            s.el.css({
              left: o.css('left'),
              right: o.css('right'),
              'margin-left': o.css('margin-left'),
              'margin-right': o.css('margin-right'),
            }));
      this.helperEl = t('<div class="fc-helper-skeleton"></div>')
        .append(i)
        .appendTo(this.el);
    },
    destroyHelper: function () {
      this.helperEl && (this.helperEl.remove(), (this.helperEl = null));
    },
    renderSelection: function (t) {
      this.view.opt('selectHelper')
        ? this.renderRangeHelper(t)
        : this.renderHighlight(t);
    },
    destroySelection: function () {
      this.destroyHelper(), this.destroyHighlight();
    },
    renderFill: function (e, n, i) {
      var r, s, o, a, l, d, h, u, c, f;
      if (n.length) {
        for (
          n = this.renderFillSegEls(e, n),
            r = this.groupSegCols(n),
            i = i || e.toLowerCase(),
            o = (s = t(
              '<div class="fc-' +
                i +
                '-skeleton"><table><tr></tr></table></div>'
            )).find('tr'),
            a = 0;
          a < r.length;
          a++
        )
          if (((l = r[a]), (d = t('<td></td>').appendTo(o)), l.length))
            for (
              h = t('<div class="fc-' + i + '-container"></div>').appendTo(d),
                u = this.colData[a].day,
                c = 0;
              c < l.length;
              c++
            )
              (f = l[c]),
                h.append(
                  f.el.css({
                    top: this.computeDateTop(f.start, u),
                    bottom: -this.computeDateTop(f.end, u),
                  })
                );
        this.bookendCells(o, e), this.el.append(s), (this.elsByFill[e] = s);
      }
      return n;
    },
  });
  function kt(t) {
    var e, n, i;
    if (
      (t.sort(St),
      (function (t) {
        var e, n, i, r, s;
        for (e = 0; e < t.length; e++)
          for (n = t[e], i = 0; i < n.length; i++)
            for ((r = n[i]).forwardSegs = [], s = e + 1; s < t.length; s++)
              Rt(r, t[s], r.forwardSegs);
      })(
        (e = (function (t) {
          var e,
            n,
            i,
            r = [];
          for (e = 0; e < t.length; e++) {
            for (n = t[e], i = 0; i < r.length && Rt(n, r[i]).length; i++);
            (n.level = i), (r[i] || (r[i] = [])).push(n);
          }
          return r;
        })(t))
      ),
      (n = e[0]))
    ) {
      for (i = 0; i < n.length; i++) Ht(n[i]);
      for (i = 0; i < n.length; i++) xt(n[i], 0, 0);
    }
  }
  function Ht(t) {
    var e,
      n,
      i = t.forwardSegs,
      r = 0;
    if (void 0 === t.forwardPressure) {
      for (e = 0; e < i.length; e++)
        Ht((n = i[e])), (r = Math.max(r, 1 + n.forwardPressure));
      t.forwardPressure = r;
    }
  }
  function xt(t, e, n) {
    var i,
      r = t.forwardSegs;
    if (void 0 === t.forwardCoord)
      for (
        r.length
          ? (r.sort(Mt),
            xt(r[0], e + 1, n),
            (t.forwardCoord = r[0].backwardCoord))
          : (t.forwardCoord = 1),
          t.backwardCoord = t.forwardCoord - (t.forwardCoord - n) / (e + 1),
          i = 0;
        i < r.length;
        i++
      )
        xt(r[i], 0, t.forwardCoord);
  }
  function Rt(t, e, n) {
    n = n || [];
    for (var i = 0; i < e.length; i++)
      (r = t), (s = e[i]), r.bottom > s.top && r.top < s.bottom && n.push(e[i]);
    var r, s;
    return n;
  }
  function Mt(t, e) {
    return (
      e.forwardPressure - t.forwardPressure ||
      (t.backwardCoord || 0) - (e.backwardCoord || 0) ||
      St(t, e)
    );
  }
  Tt.mixin({
    eventSkeletonEl: null,
    renderFgSegs: function (e) {
      return (
        (e = this.renderFgSegEls(e)),
        this.el.append(
          (this.eventSkeletonEl = t(
            '<div class="fc-content-skeleton"></div>'
          ).append(this.renderSegTable(e)))
        ),
        e
      );
    },
    destroyFgSegs: function (t) {
      this.eventSkeletonEl &&
        (this.eventSkeletonEl.remove(), (this.eventSkeletonEl = null));
    },
    renderSegTable: function (e) {
      var n,
        i,
        r,
        s,
        o,
        a,
        l = t('<table><tr></tr></table>'),
        d = l.find('tr');
      for (
        n = this.groupSegCols(e), this.computeSegVerticals(e), s = 0;
        s < n.length;
        s++
      ) {
        for (
          kt((o = n[s])),
            a = t('<div class="fc-event-container"></div>'),
            i = 0;
          i < o.length;
          i++
        )
          (r = o[i]).el.css(this.generateSegPositionCss(r)),
            r.bottom - r.top < 30 && r.el.addClass('fc-short'),
            a.append(r.el);
        d.append(t('<td></td>').append(a));
      }
      return this.bookendCells(d, 'eventSkeleton'), l;
    },
    updateSegVerticals: function () {
      var t,
        e = (this.segs || []).concat(this.businessHourSegs || []);
      for (this.computeSegVerticals(e), t = 0; t < e.length; t++)
        e[t].el.css(this.generateSegVerticalCss(e[t]));
    },
    computeSegVerticals: function (t) {
      var e, n;
      for (e = 0; e < t.length; e++)
        ((n = t[e]).top = this.computeDateTop(n.start, n.start)),
          (n.bottom = this.computeDateTop(n.end, n.start));
    },
    fgSegHtml: function (t, e) {
      var n,
        i,
        r,
        s = this.view,
        o = t.event,
        a = s.isEventDraggable(o),
        l = !e && t.isEnd && s.isEventResizable(o),
        d = this.getSegClasses(t, a, l),
        h = this.getEventSkinCss(o);
      return (
        d.unshift('fc-time-grid-event'),
        s.isMultiDayEvent(o)
          ? (t.isStart || t.isEnd) &&
            ((n = this.getEventTimeText(t)),
            (i = this.getEventTimeText(t, 'LT')),
            (r = this.getEventTimeText({ start: t.start })))
          : ((n = this.getEventTimeText(o)),
            (i = this.getEventTimeText(o, 'LT')),
            (r = this.getEventTimeText({ start: o.start }))),
        '<a class="' +
          d.join(' ') +
          '"' +
          (o.url ? ' href="' + P(o.url) + '"' : '') +
          (h ? ' style="' + h + '"' : '') +
          '><div class="fc-content">' +
          (n
            ? '<div class="fc-time" data-start="' +
              P(r) +
              '" data-full="' +
              P(i) +
              '"><span>' +
              P(n) +
              '</span></div>'
            : '') +
          (o.title ? '<div class="fc-title">' + P(o.title) + '</div>' : '') +
          '</div><div class="fc-bg"></div>' +
          (l ? '<div class="fc-resizer"></div>' : '') +
          '</a>'
      );
    },
    generateSegPositionCss: function (t) {
      var e,
        n,
        i = this.view.opt('slotEventOverlap'),
        r = t.backwardCoord,
        s = t.forwardCoord,
        o = this.generateSegVerticalCss(t);
      return (
        i && (s = Math.min(1, r + 2 * (s - r))),
        this.isRTL ? ((e = 1 - s), (n = r)) : ((e = r), (n = 1 - s)),
        (o.zIndex = t.level + 1),
        (o.left = 100 * e + '%'),
        (o.right = 100 * n + '%'),
        i &&
          t.forwardPressure &&
          (o[this.isRTL ? 'marginLeft' : 'marginRight'] = 20),
        o
      );
    },
    generateSegVerticalCss: function (t) {
      return { top: t.top, bottom: -t.bottom };
    },
    groupSegCols: function (t) {
      var e,
        n = [];
      for (e = 0; e < this.colCnt; e++) n.push([]);
      for (e = 0; e < t.length; e++) n[t[e].col].push(t[e]);
      return n;
    },
  });
  var Ft = (r.View = ht.extend({
    type: null,
    name: null,
    title: null,
    calendar: null,
    options: null,
    coordMap: null,
    el: null,
    start: null,
    end: null,
    intervalStart: null,
    intervalEnd: null,
    intervalDuration: null,
    intervalUnit: null,
    isSelected: !1,
    scrollerEl: null,
    scrollTop: null,
    widgetHeaderClass: null,
    widgetContentClass: null,
    highlightStateClass: null,
    nextDayThreshold: null,
    isHiddenDayHash: null,
    documentMousedownProxy: null,
    constructor: function (n, i, r) {
      (this.calendar = n),
        (this.options = i),
        (this.type = this.name = r),
        (this.nextDayThreshold = e.duration(this.opt('nextDayThreshold'))),
        this.initTheming(),
        this.initHiddenDays(),
        (this.documentMousedownProxy = t.proxy(this, 'documentMousedown')),
        this.initialize();
    },
    initialize: function () {},
    opt: function (e) {
      var n;
      return void 0 !== (n = this.options[e])
        ? n
        : ((n = this.calendar.options[e]),
          t.isPlainObject(n) && !l(e) ? k(n, this.type) : n);
    },
    trigger: function (t, e) {
      var n = this.calendar;
      return n.trigger.apply(
        n,
        [t, e || this].concat(Array.prototype.slice.call(arguments, 2), [this])
      );
    },
    setDate: function (t) {
      this.setRange(this.computeRange(t));
    },
    setRange: function (e) {
      t.extend(this, e), this.updateTitle();
    },
    computeRange: function (t) {
      var n,
        i,
        r = e.duration(
          this.opt('duration') || this.constructor.duration || { days: 1 }
        ),
        s = M(r),
        o = t.clone().startOf(s),
        a = o.clone().add(r);
      return (
        /year|month|week|day/.test(s)
          ? (o.stripTime(), a.stripTime())
          : (o.hasTime() || (o = this.calendar.rezoneDate(o)),
            a.hasTime() || (a = this.calendar.rezoneDate(a))),
        (n = o.clone()),
        (n = this.skipHiddenDays(n)),
        (i = a.clone()),
        {
          intervalDuration: r,
          intervalUnit: s,
          intervalStart: o,
          intervalEnd: a,
          start: n,
          end: (i = this.skipHiddenDays(i, -1, !0)),
        }
      );
    },
    computePrevDate: function (t) {
      return this.massageCurrentDate(
        t.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),
        -1
      );
    },
    computeNextDate: function (t) {
      return this.massageCurrentDate(
        t.clone().startOf(this.intervalUnit).add(this.intervalDuration)
      );
    },
    massageCurrentDate: function (t, n) {
      return (
        this.intervalDuration <= e.duration({ days: 1 }) &&
          this.isHiddenDay(t) &&
          (t = this.skipHiddenDays(t, n)).startOf('day'),
        t
      );
    },
    updateTitle: function () {
      this.title = this.computeTitle();
    },
    computeTitle: function () {
      return this.formatRange(
        { start: this.intervalStart, end: this.intervalEnd },
        this.opt('titleFormat') || this.computeTitleFormat(),
        this.opt('titleRangeSeparator')
      );
    },
    computeTitleFormat: function () {
      return 'year' == this.intervalUnit
        ? 'YYYY'
        : 'month' == this.intervalUnit
        ? this.opt('monthYearFormat')
        : this.intervalDuration.as('days') > 1
        ? 'll'
        : 'LL';
    },
    formatRange: function (t, e, n) {
      var i = t.end;
      return (
        i.hasTime() || (i = i.clone().subtract(1)),
        st(t.start, i, e, n, this.opt('isRTL'))
      );
    },
    renderView: function () {
      this.render(),
        this.updateSize(),
        this.initializeScroll(),
        this.trigger('viewRender', this, this, this.el),
        t(document).on('mousedown', this.documentMousedownProxy);
    },
    render: function () {},
    destroyView: function () {
      this.unselect(),
        this.destroyViewEvents(),
        this.destroy(),
        this.trigger('viewDestroy', this, this, this.el),
        t(document).off('mousedown', this.documentMousedownProxy);
    },
    destroy: function () {
      this.el.empty();
    },
    initTheming: function () {
      var t = this.opt('theme') ? 'ui' : 'fc';
      (this.widgetHeaderClass = t + '-widget-header'),
        (this.widgetContentClass = t + '-widget-content'),
        (this.highlightStateClass = t + '-state-highlight');
    },
    updateSize: function (t) {
      t && this.recordScroll(), this.updateHeight(), this.updateWidth();
    },
    updateWidth: function () {},
    updateHeight: function () {
      var t = this.calendar;
      this.setHeight(t.getSuggestedViewHeight(), t.isHeightAuto());
    },
    setHeight: function (t, e) {},
    computeScrollerHeight: function (t, e) {
      var n, i;
      return (
        (e = e || this.scrollerEl),
        (n = this.el.add(e)).css({ position: 'relative', left: -1 }),
        (i = this.el.outerHeight() - e.height()),
        n.css({ position: '', left: '' }),
        t - i
      );
    },
    initializeScroll: function () {},
    recordScroll: function () {
      this.scrollerEl && (this.scrollTop = this.scrollerEl.scrollTop());
    },
    restoreScroll: function () {
      null !== this.scrollTop && this.scrollerEl.scrollTop(this.scrollTop);
    },
    renderViewEvents: function (t) {
      this.renderEvents(t),
        this.eventSegEach(function (t) {
          this.trigger('eventAfterRender', t.event, t.event, t.el);
        }),
        this.trigger('eventAfterAllRender');
    },
    renderEvents: function () {},
    destroyViewEvents: function () {
      this.eventSegEach(function (t) {
        this.trigger('eventDestroy', t.event, t.event, t.el);
      }),
        this.destroyEvents();
    },
    destroyEvents: function () {},
    resolveEventEl: function (e, n) {
      var i = this.trigger('eventRender', e, e, n);
      return !1 === i ? (n = null) : i && !0 !== i && (n = t(i)), n;
    },
    showEvent: function (t) {
      this.eventSegEach(function (t) {
        t.el.css('visibility', '');
      }, t);
    },
    hideEvent: function (t) {
      this.eventSegEach(function (t) {
        t.el.css('visibility', 'hidden');
      }, t);
    },
    eventSegEach: function (t, e) {
      var n,
        i = this.getEventSegs();
      for (n = 0; n < i.length; n++)
        (e && i[n].event._id !== e._id) || t.call(this, i[n]);
    },
    getEventSegs: function () {
      return [];
    },
    isEventDraggable: function (t) {
      var e = t.source || {};
      return _(
        t.startEditable,
        e.startEditable,
        this.opt('eventStartEditable'),
        t.editable,
        e.editable,
        this.opt('editable')
      );
    },
    reportEventDrop: function (t, e, n, i) {
      var r = this.calendar,
        s = r.mutateEvent(t, e);
      this.triggerEventDrop(
        t,
        s.dateDelta,
        function () {
          s.undo(), r.reportEventChange();
        },
        n,
        i
      ),
        r.reportEventChange();
    },
    triggerEventDrop: function (t, e, n, i, r) {
      this.trigger('eventDrop', i[0], t, e, n, r, {});
    },
    reportExternalDrop: function (e, n, i, r, s) {
      var o,
        a,
        l = e.eventProps;
      l &&
        ((o = t.extend({}, l, n)),
        (a = this.calendar.renderEvent(o, e.stick)[0])),
        this.triggerExternalDrop(a, n, i, r, s);
    },
    triggerExternalDrop: function (t, e, n, i, r) {
      this.trigger('drop', n[0], e.start, i, r),
        t && this.trigger('eventReceive', null, t);
    },
    renderDrag: function (t, e) {},
    destroyDrag: function () {},
    isEventResizable: function (t) {
      var e = t.source || {};
      return _(
        t.durationEditable,
        e.durationEditable,
        this.opt('eventDurationEditable'),
        t.editable,
        e.editable,
        this.opt('editable')
      );
    },
    reportEventResize: function (t, e, n, i) {
      var r = this.calendar,
        s = r.mutateEvent(t, { end: e });
      this.triggerEventResize(
        t,
        s.durationDelta,
        function () {
          s.undo(), r.reportEventChange();
        },
        n,
        i
      ),
        r.reportEventChange();
    },
    triggerEventResize: function (t, e, n, i, r) {
      this.trigger('eventResize', i[0], t, e, n, r, {});
    },
    select: function (t, e) {
      this.unselect(e), this.renderSelection(t), this.reportSelection(t, e);
    },
    renderSelection: function (t) {},
    reportSelection: function (t, e) {
      (this.isSelected = !0), this.trigger('select', null, t.start, t.end, e);
    },
    unselect: function (t) {
      this.isSelected &&
        ((this.isSelected = !1),
        this.destroySelection(),
        this.trigger('unselect', null, t));
    },
    destroySelection: function () {},
    documentMousedown: function (e) {
      var n;
      this.isSelected &&
        this.opt('unselectAuto') &&
        D(e) &&
        (((n = this.opt('unselectCancel')) && t(e.target).closest(n).length) ||
          this.unselect(e));
    },
    initHiddenDays: function () {
      var e,
        n = this.opt('hiddenDays') || [],
        i = [],
        r = 0;
      for (!1 === this.opt('weekends') && n.push(0, 6), e = 0; e < 7; e++)
        (i[e] = -1 !== t.inArray(e, n)) || r++;
      if (!r) throw 'invalid hiddenDays';
      this.isHiddenDayHash = i;
    },
    isHiddenDay: function (t) {
      return e.isMoment(t) && (t = t.day()), this.isHiddenDayHash[t];
    },
    skipHiddenDays: function (t, e, n) {
      var i = t.clone();
      for (e = e || 1; this.isHiddenDayHash[(i.day() + (n ? e : 0) + 7) % 7]; )
        i.add(e, 'days');
      return i;
    },
    computeDayRange: function (t) {
      var e,
        n = t.start.clone().stripTime(),
        i = t.end,
        r = null;
      return (
        i &&
          ((r = i.clone().stripTime()),
          (e = +i.time()) && e >= this.nextDayThreshold && r.add(1, 'days')),
        (!i || r <= n) && (r = n.clone().add(1, 'days')),
        { start: n, end: r }
      );
    },
    isMultiDayEvent: function (t) {
      var e = this.computeDayRange(t);
      return e.end.diff(e.start, 'days') > 1;
    },
  }));
  function Gt(o, l) {
    var h,
      u = this,
      f = a({}, n, (l = l || {}));
    (h = f.lang in d ? d[f.lang] : d[n.lang]) && (f = a({}, n, h, l)),
      f.isRTL && (f = a({}, n, i, h || {}, l)),
      (u.options = f),
      (u.render = function (e) {
        y
          ? F() && (A(), N(e))
          : (function () {
              f.theme ? 'ui' : 'fc',
                o.addClass('fc'),
                f.isRTL ? o.addClass('fc-rtl') : o.addClass('fc-ltr');
              f.theme ? o.addClass('ui-widget') : o.addClass('fc-unthemed');
              (y = t("<div class='fc-view-container'></div>").prependTo(o)),
                (m = new Nt(u, f)),
                (v = m.render()) && o.prepend(v);
              N(f.defaultView),
                f.handleWindowResize &&
                  ((S = W(I, f.windowResizeDelay)), t(window).resize(S));
            })();
      }),
      (u.destroy = function () {
        w && w.destroyView();
        m.destroy(),
          y.remove(),
          o.removeClass('fc fc-ltr fc-rtl fc-unthemed ui-widget'),
          t(window).unbind('resize', S);
      }),
      (u.refetchEvents = function () {
        X(), w.destroyViewEvents(), U(), j();
      }),
      (u.reportEvents = function (t) {
        (x = t), Z();
      }),
      (u.reportEventChange = function () {
        Z();
      }),
      (u.rerenderEvents = Z),
      (u.changeView = N),
      (u.select = function (t, e) {
        (t = u.moment(t)),
          (e = e
            ? u.moment(e)
            : t.hasTime()
            ? t.clone().add(u.defaultTimedEventDuration)
            : t.clone().add(u.defaultAllDayEventDuration));
        w.select({ start: t, end: e });
      }),
      (u.unselect = function () {
        w && w.unselect();
      }),
      (u.prev = function () {
        (E = w.computePrevDate(E)), N();
      }),
      (u.next = function () {
        (E = w.computeNextDate(E)), N();
      }),
      (u.prevYear = function () {
        E.add(-1, 'years'), N();
      }),
      (u.nextYear = function () {
        E.add(1, 'years'), N();
      }),
      (u.today = function () {
        (E = u.getNow()), N();
      }),
      (u.gotoDate = function (t) {
        (E = u.moment(t)), N();
      }),
      (u.incrementDate = function (t) {
        E.add(e.duration(t)), N();
      }),
      (u.zoomTo = function (t, e) {
        var n, i;
        (e && z(e)) ||
          ((e = e || 'day'),
          (n = m.getViewsWithButtons().join(' ')),
          (i = n.match(new RegExp('\\w+' + O(e)))) || (i = n.match(/\w+Day/)),
          (e = i ? i[0] : 'agendaDay'));
        (E = t), N(e);
      }),
      (u.getDate = function () {
        return E.clone();
      }),
      (u.getCalendar = function () {
        return u;
      }),
      (u.getView = function () {
        return w;
      }),
      (u.option = function (t, e) {
        if (void 0 === e) return f[t];
        ('height' != t && 'contentHeight' != t && 'aspectRatio' != t) ||
          ((f[t] = e), P(!0));
      }),
      (u.trigger = function (t, e) {
        if (f[t])
          return f[t].apply(e || T, Array.prototype.slice.call(arguments, 2));
      }),
      (u.isValidViewType = z),
      (u.getViewButtonText = function (t) {
        var e = Y(t);
        if (e) return e.buttonText;
      });
    var g = V(c(f.lang));
    if (
      (f.monthNames && (g._months = f.monthNames),
      f.monthNamesShort && (g._monthsShort = f.monthNamesShort),
      f.dayNames && (g._weekdays = f.dayNames),
      f.dayNamesShort && (g._weekdaysShort = f.dayNamesShort),
      null != f.firstDay)
    ) {
      var p = V(g._week);
      (p.dow = f.firstDay), (g._week = p);
    }
    (u.defaultAllDayEventDuration = e.duration(f.defaultAllDayEventDuration)),
      (u.defaultTimedEventDuration = e.duration(f.defaultTimedEventDuration)),
      (u.moment = function () {
        var t;
        return (
          'local' === f.timezone
            ? (t = r.moment.apply(null, arguments)).hasTime() && t.local()
            : (t =
                'UTC' === f.timezone
                  ? r.moment.utc.apply(null, arguments)
                  : r.moment.parseZone.apply(null, arguments)),
          '_locale' in t ? (t._locale = g) : (t._lang = g),
          t
        );
      }),
      (u.getIsAmbigTimezone = function () {
        return 'local' !== f.timezone && 'UTC' !== f.timezone;
      }),
      (u.rezoneDate = function (t) {
        return u.moment(t.toArray());
      }),
      (u.getNow = function () {
        var t = f.now;
        return 'function' == typeof t && (t = t()), u.moment(t);
      }),
      (u.calculateWeekNumber = function (t) {
        var e = f.weekNumberCalculation;
        return 'function' == typeof e
          ? e(t)
          : 'local' === e
          ? t.week()
          : 'ISO' === e.toUpperCase()
          ? t.isoWeek()
          : void 0;
      }),
      (u.getEventEnd = function (t) {
        return t.end ? t.end.clone() : u.getDefaultEventEnd(t.allDay, t.start);
      }),
      (u.getDefaultEventEnd = function (t, e) {
        var n = e.clone();
        return (
          t
            ? n.stripTime().add(u.defaultAllDayEventDuration)
            : n.add(u.defaultTimedEventDuration),
          u.getIsAmbigTimezone() && n.stripZone(),
          n
        );
      }),
      function (n) {
        var i = this;
        (i.isFetchNeeded = function (t, e) {
          return (
            !s ||
            t.clone().stripZone() < s.clone().stripZone() ||
            e.clone().stripZone() > o.clone().stripZone()
          );
        }),
          (i.fetchEvents = function (t, e) {
            (s = t), (o = e), (p = []);
            var n = ++c,
              i = u.length;
            f = i;
            for (var r = 0; r < i; r++) m(u[r], n);
          }),
          (i.addEventSource = function (t) {
            var e = v(t);
            e && (u.push(e), f++, m(e, c));
          }),
          (i.removeEventSource = function (e) {
            (u = t.grep(u, function (t) {
              return !y(t, e);
            })),
              (p = t.grep(p, function (t) {
                return !y(t.source, e);
              })),
              d(p);
          }),
          (i.updateEvent = function (e) {
            (e.start = i.moment(e.start)),
              e.end ? (e.end = i.moment(e.end)) : (e.end = null);
            M(
              e,
              (function (e) {
                var n = {};
                return (
                  t.each(e, function (e, i) {
                    b(e) &&
                      void 0 !== i &&
                      (function (e) {
                        return /undefined|null|boolean|number|string/.test(
                          t.type(e)
                        );
                      })(i) &&
                      (n[e] = i);
                  }),
                  n
                );
              })(e)
            ),
              d(p);
          }),
          (i.renderEvent = function (t, e) {
            var n,
              i,
              r,
              s = D(t);
            if (s) {
              for (n = x(s), i = 0; i < n.length; i++)
                (r = n[i]).source ||
                  (e && (h.events.push(r), (r.source = h)), p.push(r));
              return d(p), n;
            }
            return [];
          }),
          (i.removeEvents = function (e) {
            var n, i;
            null == e
              ? (e = function () {
                  return !0;
                })
              : t.isFunction(e) ||
                ((n = e + ''),
                (e = function (t) {
                  return t._id == n;
                }));
            for (p = t.grep(p, e, !0), i = 0; i < u.length; i++)
              t.isArray(u[i].events) &&
                (u[i].events = t.grep(u[i].events, e, !0));
            d(p);
          }),
          (i.clientEvents = S),
          (i.mutateEvent = M),
          (i.normalizeEventDateProps = k),
          (i.ensureVisibleEventRange = H);
        var s,
          o,
          a = i.trigger,
          l = i.getView,
          d = i.reportEvents,
          h = { events: [] },
          u = [h],
          c = 0,
          f = 0,
          g = 0,
          p = [];
        function m(e, a) {
          !(function e(a, l) {
            var d;
            var h = r.sourceFetchers;
            var u;
            for (d = 0; d < h.length; d++) {
              if (
                !0 ===
                (u = h[d].call(i, a, s.clone(), o.clone(), n.timezone, l))
              )
                return;
              if ('object' == typeof u) return void e(u, l);
            }
            var c = a.events;
            if (c)
              t.isFunction(c)
                ? (E(),
                  c.call(i, s.clone(), o.clone(), n.timezone, function (t) {
                    l(t), C();
                  }))
                : t.isArray(c)
                ? l(c)
                : l();
            else {
              var f = a.url;
              if (f) {
                var g,
                  p = a.success,
                  m = a.error,
                  v = a.complete;
                g = t.isFunction(a.data) ? a.data() : a.data;
                var y = t.extend({}, g || {}),
                  w = _(a.startParam, n.startParam),
                  b = _(a.endParam, n.endParam),
                  S = _(a.timezoneParam, n.timezoneParam);
                w && (y[w] = s.format()),
                  b && (y[b] = o.format()),
                  n.timezone && 'local' != n.timezone && (y[S] = n.timezone),
                  E(),
                  t.ajax(
                    t.extend({}, Vt, a, {
                      data: y,
                      success: function (e) {
                        e = e || [];
                        var n = L(p, this, arguments);
                        t.isArray(n) && (e = n), l(e);
                      },
                      error: function () {
                        L(m, this, arguments), l();
                      },
                      complete: function () {
                        L(v, this, arguments), C();
                      },
                    })
                  );
              } else l();
            }
          })(e, function (n) {
            var i,
              r,
              s,
              o = t.isArray(e.events);
            if (a == c) {
              if (n)
                for (i = 0; i < n.length; i++)
                  (r = n[i]), (s = o ? r : D(r, e)) && p.push.apply(p, x(s));
              --f || d(p);
            }
          });
        }
        function v(e) {
          var n,
            s,
            o = r.sourceNormalizers;
          if (
            (t.isFunction(e) || t.isArray(e)
              ? (n = { events: e })
              : 'string' == typeof e
              ? (n = { url: e })
              : 'object' == typeof e && (n = t.extend({}, e)),
            n)
          ) {
            for (
              n.className
                ? 'string' == typeof n.className &&
                  (n.className = n.className.split(/\s+/))
                : (n.className = []),
                t.isArray(n.events) &&
                  ((n.origArray = n.events),
                  (n.events = t.map(n.events, function (t) {
                    return D(t, n);
                  }))),
                s = 0;
              s < o.length;
              s++
            )
              o[s].call(i, n);
            return n;
          }
        }
        function y(t, e) {
          return t && e && w(t) == w(e);
        }
        function w(t) {
          return (
            ('object' == typeof t
              ? t.origArray || t.googleCalendarId || t.url || t.events
              : null) || t
          );
        }
        function b(t) {
          return !/^_|^(id|allDay|start|end)$/.test(t);
        }
        function S(e) {
          return t.isFunction(e)
            ? t.grep(p, e)
            : null != e
            ? ((e += ''),
              t.grep(p, function (t) {
                return t._id == e;
              }))
            : p;
        }
        function E() {
          g++ || a('loading', null, !0, l());
        }
        function C() {
          --g || a('loading', null, !1, l());
        }
        function D(r, s) {
          var o,
            a,
            l,
            d = {};
          if (
            (n.eventDataTransform && (r = n.eventDataTransform(r)),
            s && s.eventDataTransform && (r = s.eventDataTransform(r)),
            t.extend(d, r),
            s && (d.source = s),
            (d._id = r._id || (void 0 === r.id ? '_fc' + Yt++ : r.id + '')),
            r.className
              ? 'string' == typeof r.className
                ? (d.className = r.className.split(/\s+/))
                : (d.className = r.className)
              : (d.className = []),
            (o = r.start || r.date),
            (a = r.end),
            G(o) && (o = e.duration(o)),
            G(a) && (a = e.duration(a)),
            r.dow || e.isDuration(o) || e.isDuration(a))
          )
            (d.start = o ? e.duration(o) : null),
              (d.end = a ? e.duration(a) : null),
              (d._recurring = !0);
          else {
            if (o && !(o = i.moment(o)).isValid()) return !1;
            a && ((a = i.moment(a)).isValid() || (a = null)),
              void 0 === (l = r.allDay) &&
                (l = _(s ? s.allDayDefault : void 0, n.allDayDefault)),
              T(o, a, l, d);
          }
          return d;
        }
        function T(t, e, n, i) {
          (i.start = t), (i.end = e), (i.allDay = n), k(i), zt(i);
        }
        function k(t) {
          null == t.allDay &&
            (t.allDay = !(t.start.hasTime() || (t.end && t.end.hasTime()))),
            t.allDay
              ? (t.start.stripTime(), t.end && t.end.stripTime())
              : (t.start.hasTime() || (t.start = i.rezoneDate(t.start)),
                t.end && !t.end.hasTime() && (t.end = i.rezoneDate(t.end))),
            t.end && !t.end.isAfter(t.start) && (t.end = null),
            t.end ||
              (n.forceEventDuration
                ? (t.end = i.getDefaultEventEnd(t.allDay, t.start))
                : (t.end = null));
        }
        function H(t) {
          var e;
          return (
            t.end ||
              (null == (e = t.allDay) && (e = !t.start.hasTime()),
              (t = { start: t.start, end: i.getDefaultEventEnd(e, t.start) })),
            t
          );
        }
        function x(e, n, i) {
          var r,
            a,
            l,
            d,
            h,
            u,
            c,
            f,
            g,
            p = [];
          if (((n = n || s), (i = i || o), e))
            if (e._recurring) {
              if ((a = e.dow))
                for (r = {}, l = 0; l < a.length; l++) r[a[l]] = !0;
              for (d = n.clone().stripTime(); d.isBefore(i); )
                (r && !r[d.day()]) ||
                  ((h = e.start),
                  (u = e.end),
                  (c = d.clone()),
                  (f = null),
                  h && (c = c.time(h)),
                  u && (f = d.clone().time(u)),
                  (g = t.extend({}, e)),
                  T(c, f, !h && !u, g),
                  p.push(g)),
                  d.add(1, 'days');
            } else p.push(e);
          return p;
        }
        function M(n, r) {
          var s,
            o,
            a,
            l,
            d,
            h,
            u = {};
          return (
            (r = r || {}).start || (r.start = n.start.clone()),
            void 0 === r.end && (r.end = n.end ? n.end.clone() : null),
            null == r.allDay && (r.allDay = n.allDay),
            k(r),
            (s = null !== n._end && null === r.end),
            r.allDay
              ? ((d = r.start),
                (h = n._start),
                (o = e.duration({
                  days: d
                    .clone()
                    .stripTime()
                    .diff(h.clone().stripTime(), 'days'),
                })))
              : (o = R(r.start, n._start)),
            !s &&
              r.end &&
              (a = R(r.end, r.start).subtract(
                R(n._end || i.getDefaultEventEnd(n._allDay, n._start), n._start)
              )),
            t.each(r, function (t, e) {
              b(t) && void 0 !== e && (u[t] = e);
            }),
            (l = (function (e, n, r, s, o, a) {
              var l = i.getIsAmbigTimezone(),
                d = [];
              s && !s.valueOf() && (s = null);
              o && !o.valueOf() && (o = null);
              return (
                t.each(e, function (e, h) {
                  var u, c;
                  (u = {
                    start: h.start.clone(),
                    end: h.end ? h.end.clone() : null,
                    allDay: h.allDay,
                  }),
                    t.each(a, function (t) {
                      u[t] = h[t];
                    }),
                    (c = { start: h._start, end: h._end, allDay: h._allDay }),
                    n && (c.end = null),
                    (c.allDay = r),
                    k(c),
                    s && (c.start.add(s), c.end && c.end.add(s)),
                    o &&
                      (c.end ||
                        (c.end = i.getDefaultEventEnd(c.allDay, c.start)),
                      c.end.add(o)),
                    l &&
                      !c.allDay &&
                      (s || o) &&
                      (c.start.stripZone(), c.end && c.end.stripZone()),
                    t.extend(h, a, c),
                    zt(h),
                    d.push(function () {
                      t.extend(h, u), zt(h);
                    });
                }),
                function () {
                  for (var t = 0; t < d.length; t++) d[t]();
                }
              );
            })(S(n._id), s, r.allDay, o, a, u)),
            { dateDelta: o, durationDelta: a, undo: l }
          );
        }
        function F() {
          var e,
            r = n.businessHours,
            s = {
              className: 'fc-nonbusiness',
              start: '09:00',
              end: '17:00',
              dow: [1, 2, 3, 4, 5],
              rendering: 'inverse-background',
            },
            o = i.getView();
          return (
            r && (e = 'object' == typeof r ? t.extend({}, s, r) : s),
            e ? x(D(e), o.start, o.end) : []
          );
        }
        function N(t, e) {
          var i = e.source || {},
            r = _(e.constraint, i.constraint, n.eventConstraint),
            s = _(e.overlap, i.overlap, n.eventOverlap);
          return Y((t = H(t)), r, s, e);
        }
        function V(t) {
          return Y(t, n.selectConstraint, n.selectOverlap);
        }
        function Y(t, e, n, i) {
          var r, s, o, a, l;
          if (
            ((t = {
              start: t.start.clone().stripZone(),
              end: t.end.clone().stripZone(),
            }),
            null != e)
          ) {
            for (
              r = (function (t) {
                if ('businessHours' === t) return F();
                if ('object' == typeof t) return x(D(t));
                return S(t);
              })(e),
                s = !1,
                o = 0;
              o < r.length;
              o++
            )
              if (z(r[o], t)) {
                s = !0;
                break;
              }
            if (!s) return !1;
          }
          for (o = 0; o < p.length; o++)
            if (((a = p[o]), (!i || i._id !== a._id) && P(a, t))) {
              if (!1 === n) return !1;
              if ('function' == typeof n && !n(a, i)) return !1;
              if (i) {
                if (!1 === (l = _(a.overlap, (a.source || {}).overlap)))
                  return !1;
                if ('function' == typeof l && !l(i, a)) return !1;
              }
            }
          return !0;
        }
        function z(t, e) {
          var n = t.start.clone().stripZone(),
            r = i.getEventEnd(t).stripZone();
          return e.start >= n && e.end <= r;
        }
        function P(t, e) {
          var n = t.start.clone().stripZone(),
            r = i.getEventEnd(t).stripZone();
          return e.start < r && e.end > n;
        }
        t.each(
          (n.events ? [n.events] : []).concat(n.eventSources || []),
          function (t, e) {
            var n = v(e);
            n && u.push(n);
          }
        ),
          (i.getBusinessHoursEvents = F),
          (i.isEventRangeAllowed = N),
          (i.isSelectionRangeAllowed = V),
          (i.isExternalDropRangeAllowed = function (e, n) {
            var i, r;
            n && ((i = t.extend({}, n, e)), (r = x(D(i))[0]));
            return r ? N(e, r) : V((e = H(e)));
          });
      }.call(u, f);
    var m,
      v,
      y,
      w,
      b,
      S,
      E,
      C = u.isFetchNeeded,
      D = u.fetchEvents,
      T = o[0],
      k = {},
      H = 0,
      x = [];
    function F() {
      return o.is(':visible');
    }
    function N(e) {
      H++,
        w &&
          e &&
          w.type !== e &&
          (m.deactivateButton(w.type),
          X(),
          w.start && w.destroyView(),
          w.el.remove(),
          (w = null)),
        !w &&
          e &&
          (((w = (function (t) {
            var e = Y(t);
            return new e.class(u, e.options, t);
          })(e)).el = t(
            "<div class='fc-view fc-" + e + "-view' ></div>"
          ).appendTo(y)),
          m.activateButton(e)),
        w &&
          ((E = w.massageCurrentDate(E)),
          (w.start && E.isWithin(w.intervalStart, w.intervalEnd)) ||
            (F() &&
              (X(),
              w.start && w.destroyView(),
              w.setDate(E),
              w.renderView(),
              U(),
              m.updateTitle(w.title),
              u.getNow().isWithin(w.intervalStart, w.intervalEnd)
                ? m.disableButton('today')
                : m.enableButton('today'),
              !f.lazyFetching || C(w.start, w.end) ? j() : Z()))),
        U(),
        H--;
    }
    function Y(n) {
      var i,
        r,
        o,
        a,
        l,
        d = f.defaultButtonText || {},
        h = f.buttonText || {},
        u = f.views || {},
        c = n,
        g = [],
        p = !1;
      if (k[n]) return k[n];
      function m(e) {
        'function' == typeof e
          ? (r = e)
          : 'object' == typeof e && t.extend(i, e);
      }
      for (; c && !r; ) (i = {}), m(s[c]), m(u[c]), g.unshift(i), (c = i.type);
      return (
        g.unshift({}),
        (i = t.extend.apply(t, g)),
        r
          ? ((o = i.duration || r.duration) &&
              ((a = M((o = e.duration(o)))), (p = 1 === o.as(a))),
            p && u[a] && (i = t.extend({}, u[a], i)),
            (l =
              h[n] ||
              (p ? h[a] : null) ||
              d[n] ||
              (p ? d[a] : null) ||
              i.buttonText ||
              r.buttonText ||
              (o
                ? (function (t) {
                    return (t.locale || t.lang).call(t, f.lang).humanize();
                  })(o)
                : null) ||
              n),
            (k[n] = { class: r, options: i, buttonText: l }))
          : void 0
      );
    }
    function z(t) {
      return Boolean(Y(t));
    }
    function P(t) {
      if (F()) return t && B(), H++, w.updateSize(!0), H--, !0;
    }
    function A() {
      F() && B();
    }
    function B() {
      b =
        'number' == typeof f.contentHeight
          ? f.contentHeight
          : 'number' == typeof f.height
          ? f.height - (v ? v.outerHeight(!0) : 0)
          : Math.round(y.width() / Math.max(f.aspectRatio, 0.5));
    }
    function I(t) {
      !H &&
        t.target === window &&
        w.start &&
        P(!0) &&
        w.trigger('windowResize', T);
    }
    function Z() {
      F() && (X(), w.destroyViewEvents(), w.renderViewEvents(x), U());
    }
    function j() {
      D(w.start, w.end);
    }
    function X() {
      y.css({ width: '100%', height: y.height(), overflow: 'hidden' });
    }
    function U() {
      y.css({ width: '', height: '', overflow: '' });
    }
    (E = null != f.defaultDate ? u.moment(f.defaultDate) : u.getNow()),
      (u.getSuggestedViewHeight = function () {
        return void 0 === b && A(), b;
      }),
      (u.isHeightAuto = function () {
        return 'auto' === f.contentHeight || 'auto' === f.height;
      });
  }
  function Nt(e, n) {
    var i = this;
    (i.render = function () {
      var e = n.header;
      if (((r = n.theme ? 'ui' : 'fc'), e))
        return (s = t("<div class='fc-toolbar'></div>")
          .append(a('left'))
          .append(a('right'))
          .append(a('center'))
          .append('<div class="fc-clear"></div>'));
    }),
      (i.destroy = function () {
        s.remove();
      }),
      (i.updateTitle = function (t) {
        s.find('h2').text(t);
      }),
      (i.activateButton = function (t) {
        s.find('.fc-' + t + '-button').addClass(r + '-state-active');
      }),
      (i.deactivateButton = function (t) {
        s.find('.fc-' + t + '-button').removeClass(r + '-state-active');
      }),
      (i.disableButton = function (t) {
        s.find('.fc-' + t + '-button')
          .attr('disabled', 'disabled')
          .addClass(r + '-state-disabled');
      }),
      (i.enableButton = function (t) {
        s.find('.fc-' + t + '-button')
          .removeAttr('disabled')
          .removeClass(r + '-state-disabled');
      }),
      (i.getViewsWithButtons = function () {
        return o;
      });
    var r,
      s = t(),
      o = [];
    function a(i) {
      var s = t('<div class="fc-' + i + '"></div>'),
        a = n.header[i];
      return (
        a &&
          t.each(a.split(' '), function (i) {
            var a,
              l = t(),
              d = !0;
            t.each(this.split(','), function (i, s) {
              var a, h, u, c, f, g, p, m;
              'title' == s
                ? ((l = l.add(t('<h2>&nbsp;</h2>'))), (d = !1))
                : (e[s]
                    ? (a = function () {
                        e[s]();
                      })
                    : e.isValidViewType(s) &&
                      ((a = function () {
                        e.changeView(s);
                      }),
                      o.push(s),
                      (f = e.getViewButtonText(s))),
                  a &&
                    ((h = k(n.themeButtonIcons, s)),
                    (u = k(n.buttonIcons, s)),
                    (c = k(n.defaultButtonText, s)),
                    (g = k(n.buttonText, s)),
                    (p =
                      f || g
                        ? P(f || g)
                        : h && n.theme
                        ? "<span class='ui-icon ui-icon-" + h + "'></span>"
                        : u && !n.theme
                        ? "<span class='fc-icon fc-icon-" + u + "'></span>"
                        : P(c || s)),
                    (m = t(
                      '<button type="button" class="' +
                        [
                          'fc-' + s + '-button',
                          r + '-button',
                          r + '-state-default',
                        ].join(' ') +
                        '">' +
                        p +
                        '</button>'
                    )
                      .click(function () {
                        m.hasClass(r + '-state-disabled') ||
                          (a(),
                          (m.hasClass(r + '-state-active') ||
                            m.hasClass(r + '-state-disabled')) &&
                            m.removeClass(r + '-state-hover'));
                      })
                      .mousedown(function () {
                        m.not('.' + r + '-state-active')
                          .not('.' + r + '-state-disabled')
                          .addClass(r + '-state-down');
                      })
                      .mouseup(function () {
                        m.removeClass(r + '-state-down');
                      })
                      .hover(
                        function () {
                          m.not('.' + r + '-state-active')
                            .not('.' + r + '-state-disabled')
                            .addClass(r + '-state-hover');
                        },
                        function () {
                          m.removeClass(r + '-state-hover').removeClass(
                            r + '-state-down'
                          );
                        }
                      )),
                    (l = l.add(m))));
            }),
              d &&
                l
                  .first()
                  .addClass(r + '-corner-left')
                  .end()
                  .last()
                  .addClass(r + '-corner-right')
                  .end(),
              l.length > 1
                ? ((a = t('<div></div>')),
                  d && a.addClass('fc-button-group'),
                  a.append(l),
                  s.append(a))
                : s.append(l);
          }),
        s
      );
    }
  }
  (r.sourceNormalizers = []), (r.sourceFetchers = []);
  var Vt = { dataType: 'json', cache: !1 },
    Yt = 1;
  function zt(t) {
    (t._allDay = t.allDay),
      (t._start = t.start.clone()),
      (t._end = t.end ? t.end.clone() : null);
  }
  var Lt = (s.basic = Ft.extend({
    dayGrid: null,
    dayNumbersVisible: !1,
    weekNumbersVisible: !1,
    weekNumberWidth: null,
    headRowEl: null,
    initialize: function () {
      (this.dayGrid = new Et(this)), (this.coordMap = this.dayGrid.coordMap);
    },
    setRange: function (t) {
      Ft.prototype.setRange.call(this, t),
        (this.dayGrid.breakOnWeeks = /year|month|week/.test(this.intervalUnit)),
        this.dayGrid.setRange(t);
    },
    computeRange: function (t) {
      var e = Ft.prototype.computeRange.call(this, t);
      return (
        /year|month/.test(e.intervalUnit) &&
          (e.start.startOf('week'),
          (e.start = this.skipHiddenDays(e.start)),
          e.end.weekday() &&
            (e.end.add(1, 'week').startOf('week'),
            (e.end = this.skipHiddenDays(e.end, -1, !0)))),
        e
      );
    },
    render: function () {
      (this.dayNumbersVisible = this.dayGrid.rowCnt > 1),
        (this.weekNumbersVisible = this.opt('weekNumbers')),
        (this.dayGrid.numbersVisible =
          this.dayNumbersVisible || this.weekNumbersVisible),
        this.el.addClass('fc-basic-view').html(this.renderHtml()),
        (this.headRowEl = this.el.find('thead .fc-row')),
        (this.scrollerEl = this.el.find('.fc-day-grid-container')),
        (this.dayGrid.coordMap.containerEl = this.scrollerEl),
        (this.dayGrid.el = this.el.find('.fc-day-grid')),
        this.dayGrid.render(this.hasRigidRows());
    },
    destroy: function () {
      this.dayGrid.destroy(), Ft.prototype.destroy.call(this);
    },
    renderHtml: function () {
      return (
        '<table><thead><tr><td class="' +
        this.widgetHeaderClass +
        '">' +
        this.dayGrid.headHtml() +
        '</td></tr></thead><tbody><tr><td class="' +
        this.widgetContentClass +
        '"><div class="fc-day-grid-container"><div class="fc-day-grid"></div></div></td></tr></tbody></table>'
      );
    },
    headIntroHtml: function () {
      if (this.weekNumbersVisible)
        return (
          '<th class="fc-week-number ' +
          this.widgetHeaderClass +
          '" ' +
          this.weekNumberStyleAttr() +
          '><span>' +
          P(this.opt('weekNumberTitle')) +
          '</span></th>'
        );
    },
    numberIntroHtml: function (t) {
      if (this.weekNumbersVisible)
        return (
          '<td class="fc-week-number" ' +
          this.weekNumberStyleAttr() +
          '><span>' +
          this.calendar.calculateWeekNumber(this.dayGrid.getCell(t, 0).start) +
          '</span></td>'
        );
    },
    dayIntroHtml: function () {
      if (this.weekNumbersVisible)
        return (
          '<td class="fc-week-number ' +
          this.widgetContentClass +
          '" ' +
          this.weekNumberStyleAttr() +
          '></td>'
        );
    },
    introHtml: function () {
      if (this.weekNumbersVisible)
        return (
          '<td class="fc-week-number" ' + this.weekNumberStyleAttr() + '></td>'
        );
    },
    numberCellHtml: function (t) {
      var e,
        n = t.start;
      return this.dayNumbersVisible
        ? ((e = this.dayGrid.getDayClasses(n)).unshift('fc-day-number'),
          '<td class="' +
            e.join(' ') +
            '" data-date="' +
            n.format() +
            '">' +
            n.date() +
            '</td>')
        : '<td></td>';
    },
    weekNumberStyleAttr: function () {
      return null !== this.weekNumberWidth
        ? 'style="width:' + this.weekNumberWidth + 'px"'
        : '';
    },
    hasRigidRows: function () {
      var t = this.opt('eventLimit');
      return t && 'number' != typeof t;
    },
    updateWidth: function () {
      this.weekNumbersVisible &&
        (this.weekNumberWidth = w(this.el.find('.fc-week-number')));
    },
    setHeight: function (t, e) {
      var n,
        i = this.opt('eventLimit');
      S(this.scrollerEl),
        g(this.headRowEl),
        this.dayGrid.destroySegPopover(),
        i && 'number' == typeof i && this.dayGrid.limitRows(i),
        (n = this.computeScrollerHeight(t)),
        this.setGridHeight(n, e),
        i && 'number' != typeof i && this.dayGrid.limitRows(i),
        !e &&
          b(this.scrollerEl, n) &&
          (f(this.headRowEl, C(this.scrollerEl)),
          (n = this.computeScrollerHeight(t)),
          this.scrollerEl.height(n),
          this.restoreScroll());
    },
    setGridHeight: function (t, e) {
      e ? y(this.dayGrid.rowEls) : v(this.dayGrid.rowEls, t, !0);
    },
    renderEvents: function (t) {
      this.dayGrid.renderEvents(t), this.updateHeight();
    },
    getEventSegs: function () {
      return this.dayGrid.getEventSegs();
    },
    destroyEvents: function () {
      this.recordScroll(), this.dayGrid.destroyEvents();
    },
    renderDrag: function (t, e) {
      return this.dayGrid.renderDrag(t, e);
    },
    destroyDrag: function () {
      this.dayGrid.destroyDrag();
    },
    renderSelection: function (t) {
      this.dayGrid.renderSelection(t);
    },
    destroySelection: function () {
      this.dayGrid.destroySelection();
    },
  }));
  o({ fixedWeekCount: !0 }),
    ((s.month = Lt.extend({
      computeRange: function (t) {
        var e,
          n = Lt.prototype.computeRange.call(this, t);
        return (
          this.isFixedWeeks() &&
            ((e = Math.ceil(n.end.diff(n.start, 'weeks', !0))),
            n.end.add(6 - e, 'weeks')),
          n
        );
      },
      setGridHeight: function (t, e) {
        (e = e || 'variable' === this.opt('weekMode')) &&
          (t *= this.rowCnt / 6),
          v(this.dayGrid.rowEls, t, !e);
      },
      isFixedWeeks: function () {
        var t = this.opt('weekMode');
        return t ? 'fixed' === t : this.opt('fixedWeekCount');
      },
    })).duration = { months: 1 }),
    (s.basicWeek = { type: 'basic', duration: { weeks: 1 } }),
    (s.basicDay = { type: 'basic', duration: { days: 1 } }),
    o({
      allDaySlot: !0,
      allDayText: 'all-day',
      scrollTime: '06:00:00',
      slotDuration: '00:30:00',
      minTime: '00:00:00',
      maxTime: '24:00:00',
      slotEventOverlap: !0,
    });
  (s.agenda = Ft.extend({
    timeGrid: null,
    dayGrid: null,
    axisWidth: null,
    noScrollRowEls: null,
    bottomRuleEl: null,
    bottomRuleHeight: null,
    initialize: function () {
      (this.timeGrid = new Tt(this)),
        this.opt('allDaySlot')
          ? ((this.dayGrid = new Et(this)),
            (this.coordMap = new ft([
              this.dayGrid.coordMap,
              this.timeGrid.coordMap,
            ])))
          : (this.coordMap = this.timeGrid.coordMap);
    },
    setRange: function (t) {
      Ft.prototype.setRange.call(this, t),
        this.timeGrid.setRange(t),
        this.dayGrid && this.dayGrid.setRange(t);
    },
    render: function () {
      this.el.addClass('fc-agenda-view').html(this.renderHtml()),
        (this.scrollerEl = this.el.find('.fc-time-grid-container')),
        (this.timeGrid.coordMap.containerEl = this.scrollerEl),
        (this.timeGrid.el = this.el.find('.fc-time-grid')),
        this.timeGrid.render(),
        (this.bottomRuleEl = t(
          '<hr class="' + this.widgetHeaderClass + '"/>'
        ).appendTo(this.timeGrid.el)),
        this.dayGrid &&
          ((this.dayGrid.el = this.el.find('.fc-day-grid')),
          this.dayGrid.render(),
          (this.dayGrid.bottomCoordPadding = this.dayGrid.el
            .next('hr')
            .outerHeight())),
        (this.noScrollRowEls = this.el.find('.fc-row:not(.fc-scroller *)'));
    },
    destroy: function () {
      this.timeGrid.destroy(),
        this.dayGrid && this.dayGrid.destroy(),
        Ft.prototype.destroy.call(this);
    },
    renderHtml: function () {
      return (
        '<table><thead><tr><td class="' +
        this.widgetHeaderClass +
        '">' +
        this.timeGrid.headHtml() +
        '</td></tr></thead><tbody><tr><td class="' +
        this.widgetContentClass +
        '">' +
        (this.dayGrid
          ? '<div class="fc-day-grid"></div><hr class="' +
            this.widgetHeaderClass +
            '"/>'
          : '') +
        '<div class="fc-time-grid-container"><div class="fc-time-grid"></div></div></td></tr></tbody></table>'
      );
    },
    headIntroHtml: function () {
      var t, e, n, i;
      return this.opt('weekNumbers')
        ? ((t = this.timeGrid.getCell(0).start),
          (e = this.calendar.calculateWeekNumber(t)),
          (n = this.opt('weekNumberTitle')),
          (i = this.opt('isRTL') ? e + n : n + e),
          '<th class="fc-axis fc-week-number ' +
            this.widgetHeaderClass +
            '" ' +
            this.axisStyleAttr() +
            '><span>' +
            P(i) +
            '</span></th>')
        : '<th class="fc-axis ' +
            this.widgetHeaderClass +
            '" ' +
            this.axisStyleAttr() +
            '></th>';
    },
    dayIntroHtml: function () {
      return (
        '<td class="fc-axis ' +
        this.widgetContentClass +
        '" ' +
        this.axisStyleAttr() +
        '><span>' +
        (this.opt('allDayHtml') || P(this.opt('allDayText'))) +
        '</span></td>'
      );
    },
    slotBgIntroHtml: function () {
      return (
        '<td class="fc-axis ' +
        this.widgetContentClass +
        '" ' +
        this.axisStyleAttr() +
        '></td>'
      );
    },
    introHtml: function () {
      return '<td class="fc-axis" ' + this.axisStyleAttr() + '></td>';
    },
    axisStyleAttr: function () {
      return null !== this.axisWidth
        ? 'style="width:' + this.axisWidth + 'px"'
        : '';
    },
    updateSize: function (t) {
      t && this.timeGrid.resize(), Ft.prototype.updateSize.call(this, t);
    },
    updateWidth: function () {
      this.axisWidth = w(this.el.find('.fc-axis'));
    },
    setHeight: function (t, e) {
      var n, i;
      null === this.bottomRuleHeight &&
        (this.bottomRuleHeight = this.bottomRuleEl.outerHeight()),
        this.bottomRuleEl.hide(),
        this.scrollerEl.css('overflow', ''),
        S(this.scrollerEl),
        g(this.noScrollRowEls),
        this.dayGrid &&
          (this.dayGrid.destroySegPopover(),
          (n = this.opt('eventLimit')) && 'number' != typeof n && (n = 5),
          n && this.dayGrid.limitRows(n)),
        e ||
          ((i = this.computeScrollerHeight(t)),
          b(this.scrollerEl, i)
            ? (f(this.noScrollRowEls, C(this.scrollerEl)),
              (i = this.computeScrollerHeight(t)),
              this.scrollerEl.height(i),
              this.restoreScroll())
            : (this.scrollerEl.height(i).css('overflow', 'hidden'),
              this.bottomRuleEl.show()));
    },
    initializeScroll: function () {
      var t = this,
        n = e.duration(this.opt('scrollTime')),
        i = this.timeGrid.computeTimeTop(n);
      function r() {
        t.scrollerEl.scrollTop(i);
      }
      (i = Math.ceil(i)) && i++, r(), setTimeout(r, 0);
    },
    renderEvents: function (t) {
      var e,
        n = [],
        i = [];
      for (e = 0; e < t.length; e++) t[e].allDay ? n.push(t[e]) : i.push(t[e]);
      this.timeGrid.renderEvents(i),
        this.dayGrid && this.dayGrid.renderEvents(n),
        this.updateHeight();
    },
    getEventSegs: function () {
      return this.timeGrid
        .getEventSegs()
        .concat(this.dayGrid ? this.dayGrid.getEventSegs() : []);
    },
    destroyEvents: function () {
      this.recordScroll(),
        this.timeGrid.destroyEvents(),
        this.dayGrid && this.dayGrid.destroyEvents();
    },
    renderDrag: function (t, e) {
      return t.start.hasTime()
        ? this.timeGrid.renderDrag(t, e)
        : this.dayGrid
        ? this.dayGrid.renderDrag(t, e)
        : void 0;
    },
    destroyDrag: function () {
      this.timeGrid.destroyDrag(), this.dayGrid && this.dayGrid.destroyDrag();
    },
    renderSelection: function (t) {
      t.start.hasTime() || t.end.hasTime()
        ? this.timeGrid.renderSelection(t)
        : this.dayGrid && this.dayGrid.renderSelection(t);
    },
    destroySelection: function () {
      this.timeGrid.destroySelection(),
        this.dayGrid && this.dayGrid.destroySelection();
    },
  })),
    (s.agendaWeek = { type: 'agenda', duration: { weeks: 1 } }),
    (s.agendaDay = { type: 'agenda', duration: { days: 1 } }),
    o({ yearColumns: 2, fixedWeekCount: 5 }),
    (s.year = Ft.extend({
      dayNumbersVisible: !0,
      weekNumbersVisible: !1,
      weekNumberWidth: null,
      table: null,
      body: null,
      bodyRows: null,
      subTables: null,
      bodyCells: null,
      daySegmentContainer: null,
      colCnt: null,
      rowCnt: null,
      dayGrids: [],
      rtl: null,
      dis: null,
      dit: null,
      firstDay: 0,
      firstMonth: null,
      lastMonth: null,
      yearColumns: 2,
      nbMonths: null,
      hiddenMonths: [],
      nwe: null,
      tm: null,
      colFormat: null,
      dayGrid: null,
      coordMap: null,
      otherMonthDays: [],
      rowsForMonth: [],
      initialize: function () {
        this.updateOptions(),
          (this.dayGrid = new Et(this)),
          (this.dayGrids[0] = this.dayGrid),
          (this.coordMap = this.dayGrid.coordMap);
      },
      updateOptions: function () {
        (this.rtl = this.opt('isRTL')),
          this.rtl
            ? ((this.dis = -1), (this.dit = this.colCnt - 1))
            : ((this.dis = 1), (this.dit = 0)),
          (this.firstDay = parseInt(this.opt('firstDay'), 10)),
          (this.firstMonth = parseInt(this.opt('firstMonth'), 10) || 0),
          (this.lastMonth = this.opt('lastMonth') || this.firstMonth + 12),
          (this.hiddenMonths = this.opt('hiddenMonths') || []),
          (this.yearColumns = parseInt(this.opt('yearColumns'), 10) || 2),
          (this.colFormat = this.opt('columnFormat')),
          (this.weekNumbersVisible = this.opt('weekNumbers')),
          (this.nwe = this.opt('weekends') ? 0 : 1),
          (this.tm = this.opt('theme') ? 'ui' : 'fc'),
          (this.nbMonths = this.lastMonth - this.firstMonth),
          (this.lastMonth = this.lastMonth % 12),
          (this.lang = this.opt('lang'));
      },
      computeTitle: function () {
        if (null !== this.opt('yearTitleFormat')) {
          var t = this.intervalStart
            .locale(this.lang)
            .format(this.opt('yearTitleFormat'));
          return (
            this.intervalStart
              .clone()
              .add(this.nbMonths - 1, 'months')
              .year() != this.intervalStart.year() &&
              (t += this.intervalEnd.format(' - YYYY')),
            t
          );
        }
        return this.formatRange(
          { start: this.intervalStart, end: this.intervalEnd },
          this.opt('titleFormat') || this.computeTitleFormat(),
          this.opt('titleRangeSeparator')
        );
      },
      render: function (t) {
        var e =
          Math.floor(this.intervalStart.month() / this.nbMonths) *
          this.nbMonths;
        !e &&
          this.firstMonth > 0 &&
          !this.opt('lastMonth') &&
          (e = (this.firstMonth + e) % 12),
          (this.intervalStart = r.moment([this.intervalStart.year(), e, 1])),
          (this.intervalEnd = this.intervalStart
            .clone()
            .add(this.nbMonths, 'months')
            .add(-15, 'minutes')),
          (this.start = this.intervalStart.clone()),
          (this.start = this.skipHiddenDays(this.start)),
          this.start.startOf('week'),
          (this.start = this.skipHiddenDays(this.start)),
          (this.end = this.intervalEnd.clone()),
          (this.end = this.skipHiddenDays(this.end, -1, !0)),
          this.end.add((7 - this.end.weekday()) % 7, 'days'),
          (this.end = this.skipHiddenDays(this.end, -1, !0));
        var n = parseInt(this.opt('yearColumns'), 10),
          i = this.opt('weekends') ? 7 : 5;
        this.renderYear(n, i, !0);
      },
      renderYear: function (t, e, n) {
        (this.colCnt = e),
          !this.table || (this.destroyEvents(), this.table.remove()),
          this.buildSkeleton(this.yearColumns, n),
          this.buildDayGrids(),
          this.updateCells();
      },
      setRange: function (t) {
        Ft.prototype.setRange.call(this, t);
      },
      computeRange: function (t) {
        this.constructor.duration = { months: this.nbMonths || 12 };
        var e = Ft.prototype.computeRange.call(this, t);
        return (
          /year|month/.test(e.intervalUnit) &&
            (e.start.startOf('week'),
            (e.start = this.skipHiddenDays(e.start)),
            e.end.weekday() &&
              (e.end.add(1, 'week').startOf('week'),
              (e.end = this.skipHiddenDays(e.end, -1, !0)))),
          e
        );
      },
      buildSkeleton: function (e, n) {
        var i,
          s,
          o,
          a,
          l = 0,
          d = this.intervalStart.year(),
          h = this.tm + '-widget-header',
          u = this.opt('dayNamesShort'),
          c = this.opt('monthNames');
        for (
          this.rowCnt = 0,
            a =
              '<table class="fc-year-main-table fc-border-separate" style="width:100%;"><tr>',
            a += '<td class="fc-year-month-border fc-first"></td>',
            s = 0;
          s < this.nbMonths;
          s++
        ) {
          var f = this.intervalStart.month() + s,
            g = -1 != t.inArray(f % 12, this.hiddenMonths),
            p = g ? 'display:none;' : '',
            m = r.moment([d + f / 12, f % 12, 1]).locale(this.lang),
            v = c[s % 12],
            y = m.format('YYYYMM');
          if (
            ((o = m.year()),
            this.firstMonth + this.nbMonths > 12 && (v = v + ' ' + o),
            s % e == 0 &&
              s > 0 &&
              !g &&
              (l++,
              (a +=
                '<td class="fc-year-month-border fc-last"></td></tr><tr><td class="fc-year-month-border fc-first"></td>')),
            s % e < e &&
              s % e > 0 &&
              !g &&
              (a += '<td class="fc-year-month-separator"></td>'),
            (a += '<td class="fc-year-monthly-td" style="' + p + '">'),
            (a +=
              '<div class="fc-year-monthly-name' +
              (0 === l ? ' fc-first' : '') +
              '"><a name="' +
              y +
              '" data-year="' +
              o +
              '" data-month="' +
              f +
              '" href="#">' +
              P(v) +
              '</a></div>'),
            (a += '<div class="fc-row ' + h + '">'),
            (a +=
              '<table class="fc-year-month-header"><thead><tr class="fc-year-week-days">'),
            0 == this.opt('isRTL'))
          )
            for (
              a += this.headIntroHtml(), i = this.firstDay;
              i < this.colCnt + this.firstDay;
              i++
            )
              a +=
                '<th class="fc-day-header fc-year-weekly-head fc-' +
                H[i % 7] +
                ' ' +
                h +
                '">' +
                u[i % 7] +
                '</th>';
          else {
            for (
              i = this.colCnt + this.firstDay - 1;
              i > this.firstDay - 1;
              i--
            )
              a +=
                '<th class="fc-day-header fc-year-weekly-head fc-' +
                H[i % 7] +
                ' ' +
                h +
                '">' +
                u[i % 7] +
                '</th>';
            a += this.headIntroHtml();
          }
          (a += '</tr><tr></tr></thead></table>'),
            (a += '</div>'),
            (a +=
              '<div class="fc-day-grid-container"><div class="fc-day-grid">'),
            (a += '</div></div>'),
            (a += '<div class="fc-year-monthly-footer"></div>'),
            (a += '</td>'),
            g && 0;
        }
        (a += '<td class="fc-year-month-border fc-last"></td>'),
          (a += '</tr></table>'),
          (this.table = t(a).appendTo(this.el)),
          (this.bodyRows = this.table.find('.fc-day-grid .fc-week')),
          (this.bodyCells = this.bodyRows.find('td.fc-day')),
          (this.bodyFirstCells = this.bodyCells.filter(':first-child')),
          (this.subTables = this.table.find('td.fc-year-monthly-td')),
          (this.head = this.table.find('thead')),
          this.head
            .find('tr.fc-year-week-days th.fc-year-weekly-head:first')
            .addClass('fc-first'),
          this.head
            .find('tr.fc-year-week-days th.fc-year-weekly-head:last')
            .addClass('fc-last'),
          this.table
            .find('.fc-year-monthly-name a')
            .click(this.calendar, function (e) {
              e.data.changeView('month'),
                e.data.gotoDate([
                  t(this).attr('data-year'),
                  t(this).attr('data-month'),
                  1,
                ]);
            }),
          this.dayBind(this.bodyCells),
          (this.daySegmentContainer = t(
            '<div style="position:absolute;z-index:8;top:0;left:0;"></div>'
          ).appendTo(this.table));
      },
      buildDayGrids: function () {
        for (var e = this, n = [], i = 0; i < this.nbMonths; i++)
          n.push(i + this.intervalStart.month());
        var r = e.intervalStart.clone();
        this.firstDay;
        (e.dayGrids = []),
          t.each(n, function (t, n) {
            var i = new Et(e),
              s = e.tableByOffset(t),
              o = r.clone().add(t, 'months');
            (i.headRowEl = s.find('.fc-row:first')),
              (i.scrollerEl = s.find('.fc-day-grid-container')),
              (i.coordMap.containerEl = i.scrollerEl),
              (i.el = s.find('.fc-day-grid')),
              (i.offset = t),
              (i.rowData = []),
              (i.colData = []);
            var a = e.computeMonthRange(o);
            (i.start = a.start),
              (i.end = a.end),
              (i.breakOnWeeks = !0),
              i.updateCells(),
              (e.dayNumbersVisible = i.rowCnt > 1),
              (i.numbersVisible = e.dayNumbersVisible || e.weekNumbersVisible),
              Et.prototype.render.call(i, e.hasRigidRows()),
              e.dayGrids.push(i);
          }),
          (e.dayGrid = e.dayGrids[0]),
          (e.coordMap = e.dayGrid.coordMap);
      },
      isFixedWeeks: function () {
        var t = this.opt('weekMode');
        return t ? 'fixed' === t : this.opt('fixedWeekCount');
      },
      computeMonthRange: function (t) {
        var e = this.firstDay;
        this.constructor.duration = { months: 1 };
        var n = Ft.prototype.computeRange.call(this, t);
        if (/year|month/.test(n.intervalUnit)) {
          n.start.startOf('week'),
            (n.start = this.skipHiddenDays(n.start)),
            n.start.day(e),
            n.end.day(e),
            n.start.date() > 1 &&
              n.start.date() <= 7 &&
              n.start.subtract(7, 'days');
          var i = Math.ceil(n.end.diff(n.start, 'weeks', !0));
          5 === this.isFixedWeeks()
            ? 4 == i && n.end.add(1, 'weeks')
            : this.isFixedWeeks() && i <= 6 && n.end.add(6 - i, 'weeks');
        }
        return n;
      },
      destroy: function () {
        t.each(this.dayGrids, function (t, e) {
          e.destroy();
        }),
          Ft.prototype.destroy.call(this);
      },
      updateCells: function () {
        var n = this;
        this.subTables.find('.fc-week:first').addClass('fc-first'),
          this.subTables.find('.fc-week:last').addClass('fc-last'),
          this.subTables
            .find('.fc-bg')
            .find('td.fc-day:last')
            .addClass('fc-last'),
          this.subTables.each(function (i, r) {
            n.curYear || (n.curYear = n.intervalStart);
            n.curYear.clone();
            var s = (i + n.intervalStart.month()) % 12;
            n.dayGrids[i].start;
            t(r).find('.fc-bg').find('td.fc-day:first').addClass('fc-first'),
              (n.otherMonthDays[s] = [0, 0, 0, 0]),
              t(r)
                .find('.fc-content-skeleton tr')
                .each(function (n, r) {
                  t(r)
                    .find('td')
                    .not('.fc-week-number')
                    .each(function (n, r) {
                      var s = t(r),
                        o = e(s.attr('data-date'));
                      o.month() != i
                        ? (s.addClass('fc-other-month'),
                          o.month() == i
                            ? s.addClass('fc-prev-month')
                            : s.addClass('fc-next-month'))
                        : o;
                    });
                });
          }),
          n.bodyRows
            .filter('.fc-year-have-event')
            .removeClass('fc-year-have-event');
      },
      headIntroHtml: function () {
        var t =
          null != this.opt('weekNumberTitle')
            ? this.opt('weekNumberTitle').substring(0, 1)
            : '';
        return this.weekNumbersVisible
          ? '<th class="fc-week-number-head ' +
              this.widgetHeaderClass +
              '"><span>' +
              P(t) +
              '</span></th>'
          : '';
      },
      numberIntroHtml: function (t, e) {
        var n;
        return this.weekNumbersVisible
          ? ((e = e || this.dayGrid),
            (n =
              0 == this.opt('isRTL')
                ? this.calendar.calculateWeekNumber(e.getCell(t, 0).start)
                : this.calendar.calculateWeekNumber(e.getCell(t, 6).start)),
            '<td class="fc-week-number" ' +
              this.weekNumberStyleAttr('') +
              '><span>' +
              n +
              '</span></td>')
          : '';
      },
      dayIntroHtml: function () {
        return this.weekNumbersVisible
          ? '<td class="fc-week-number ' +
              this.widgetContentClass +
              '" ' +
              this.weekNumberStyleAttr('') +
              '></td>'
          : '';
      },
      introHtml: function () {
        return this.weekNumbersVisible
          ? '<td class="fc-week-number" ' +
              this.weekNumberStyleAttr('') +
              '></td>'
          : '';
      },
      weekNumberStyleAttr: function () {
        var t = '';
        return (
          null !== this.weekNumberWidth &&
            (t = 'style="width:' + this.weekNumberWidth + 'px;"'),
          t
        );
      },
      numberCellHtml: function (t) {
        if (!this.dayNumbersVisible) return '<td></td>';
        var e = t.start,
          n = this.dayGrid.getDayClasses(e);
        return (
          n.unshift('fc-day-number'),
          '<td class="' +
            n.join(' ') +
            '" data-date="' +
            e.format() +
            '">' +
            e.date() +
            '</td>'
        );
      },
      hasRigidRows: function () {
        var t = this.opt('eventLimit');
        return t && 'number' != typeof t;
      },
      cellsForMonth: function (t) {
        return this.rowsForMonth[t] * (this.nwe ? 5 : 7);
      },
      addDays: function (t, e) {
        t.add(e, 'days');
      },
      skipWeekend: function (t, e, n) {
        for (
          e = e || 1;
          !t.day() || (n && 1 == t.day()) || (!n && 6 == t.day());

        )
          this.addDays(t, e);
        return t;
      },
      daysInMonth: function (t, e) {
        return r.moment([t, e, 0]).date();
      },
      dateInMonth: function (t, e) {
        return t.month() == e % 12;
      },
      rowToGridOffset: function (t) {
        for (var e = 0, n = this.firstMonth; n < this.lastMonth; n++)
          if (t < (e += this.rowsForMonth[n])) return n - this.firstMonth;
        return -1;
      },
      rowToGridRow: function (t) {
        for (var e = 0, n = this.firstMonth; n < this.lastMonth; n++)
          if (t < (e += this.rowsForMonth[n]))
            return t - (e - this.rowsForMonth[n]);
        return -1;
      },
      tableByOffset: function (e) {
        return t(this.subTables[e]);
      },
      setGridHeight: function (e, n, i) {
        void 0 === i
          ? t.each(this.dayGrids, function (t, i) {
              n ? y(i.rowEls) : v(i.rowEls, e, !0);
            })
          : n
          ? y(i.rowEls)
          : v(i.rowEls, e, !0);
      },
      computeScrollerHeight: function (t, e) {
        var n,
          i,
          r = (e = e || this.scrollerEl).closest('.fc-year-monthly-td');
        return (
          (n = r.add(e)).css({ position: 'relative', left: -1 }),
          (i = r.outerHeight() - e.height()),
          n.css({ position: '', left: '' }),
          t - i
        );
      },
      setHeight: function (e, n) {
        var i,
          r = this,
          s = this.opt('eventLimit');
        t.each(this.dayGrids, function (t, o) {
          o.el.length > 0 &&
            (S(o.scrollerEl),
            g(o.headRowEl),
            o.destroySegPopover(),
            s && 'number' == typeof s && o.limitRows(s),
            i || (i = r.computeScrollerHeight(e, o.scrollerEl)),
            r.setGridHeight(i, n, o),
            s && 'number' != typeof s && o.limitRows(s),
            !n &&
              b(o.scrollerEl, i) &&
              (f(o.headRowEl, C(o.scrollerEl)),
              (i = r.computeScrollerHeight(e, o.scrollerEl)),
              o.scrollerEl.height(i),
              r.restoreScroll()));
        });
      },
      updateWidth: function () {
        this.weekNumbersVisible &&
          ((this.weekNumberWidth = w(this.el.find('.fc-week-number'))),
          this.weekNumberWidth &&
            this.el
              .find('.fc-week-number-head')
              .width(this.weekNumberWidth + 2));
      },
      updateHeight: function () {
        var t = this.calendar;
        if (this.yearColumns > 0) {
          var e =
            t.getSuggestedViewHeight() * (1.1 / (0.01 + this.yearColumns));
          this.setHeight(e, t.isHeightAuto());
        }
      },
      dayBind: function (t) {
        t.click(this.dayClick);
      },
      dayClick: function (e) {
        if (!this.opt('selectable')) {
          var n = this.className.match(/fc\-day\-(\d+)\-(\d+)\-(\d+)/),
            i = new Date(n[1], n[2] - 1, n[3]);
          t.trigger('dayClick', this, r.moment(i), !0, e);
        }
      },
      renderEvents: function (e) {
        t.each(this.dayGrids, function (t, n) {
          n.renderEvents(e);
        }),
          this.updateHeight();
      },
      getEventSegs: function () {
        var e = [];
        return (
          t.each(this.dayGrids, function (t, n) {
            for (var i = n.getEventSegs(), r = 0; r < i.length; r++)
              e.push(i[r]);
          }),
          e
        );
      },
      destroyEvents: function () {
        this.recordScroll(),
          t.each(this.dayGrids, function (t, e) {
            e.destroyEvents();
          });
      },
      renderDrag: function (e, n) {
        return (
          t.each(this.dayGrids, function (t, i) {
            i.renderDrag(e, n);
          }),
          !1
        );
      },
      destroyDrag: function () {
        t.each(this.dayGrids, function (t, e) {
          e.destroyDrag();
        });
      },
      renderSelection: function (e, n) {
        t.each(this.dayGrids, function (t, i) {
          i !== n &&
            (i.start <= e.end || i.end >= e.start) &&
            i.renderSelection(e);
        });
      },
      destroySelection: function () {
        t.each(this.dayGrids, function (t, e) {
          e.destroySelection();
        });
      },
    }));
});
